import{r as m,j as t}from"./jsx-runtime-03333307.js";import{I as p}from"./icon-button-c6bda5d8.js";import{A as C}from"./index-61679f6b.js";import{m as f}from"./motion-9380e2c6.js";const x="_addToCartButton_kmspv_1",k="_button_kmspv_10",B="_inputWrapper_kmspv_25",g="_decrement_kmspv_35",j="_increment_kmspv_36",I="_quantityInput_kmspv_42",N="_visuallyHidden_kmspv_64",n={addToCartButton:x,button:k,inputWrapper:B,decrement:g,increment:j,quantityInput:I,visuallyHidden:N},A=({id:c,quantity:u=0,hasBeenAdded:d,onClick:y,buttonLabel:v="",disabled:s=!1,onChange:o=()=>{},maxQuantity:r})=>{const[e,i]=m.useState(u);m.useEffect(()=>{i(u)},[u]);const _=a=>{const l=Math.max(0,parseInt(a.target.value)||0);(r===void 0||l<=r)&&(i(l),o(l))},b=()=>{s||y()},h=()=>{e<0&&(i(0),o(0))},q=()=>{(r===void 0||e<r)&&(i(a=>Math.min(a+1,r||a+1)),o(e+1))},T=()=>{e>0&&(i(a=>Math.max(a-1,0)),o(e-1))};return t.jsx(C,{children:t.jsxs("div",{className:n.addToCartButton,role:"group","aria-label":"Quantity changer",children:[!d&&t.jsx(f.button,{className:n.button,onClick:b,initial:{scale:.2},animate:{scale:e===0?1:0},exit:{scale:.2},disabled:s,"aria-label":"Add item to cart",children:v},"add-button"),d&&t.jsxs(f.div,{className:n.inputWrapper,initial:{scale:.2,opacity:0},animate:{scale:e>0?1:0,opacity:e>0?1:0},exit:{scale:.2,opacity:0},children:[t.jsx(p,{onClick:T,className:n.decrement,size:"small",icon:"icon-minus",type:"button",name:"Decrease quantity",noBorder:!0,surface:"white",disabled:s,round:!0}),t.jsx("label",{htmlFor:c,className:n.visuallyHidden,children:"Current quantity"}),t.jsx("input",{id:c,type:"number",value:e,onChange:_,onBlur:h,className:n.quantityInput,"aria-label":"Current quantity",min:"0",placeholder:"0",disabled:s,size:4,"aria-live":"polite"}),t.jsx(p,{className:n.increment,size:"small",onClick:q,icon:"icon-plus",type:"button",name:"Increase quantity",noBorder:!0,surface:"white",round:!0,disabled:s})]},"quantity-controls")]})})};A.__docgenInfo={description:"",methods:[],displayName:"AddToCartButton",props:{id:{required:!0,tsType:{name:"string"},description:""},quantity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},hasBeenAdded:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"CallableFunction"},description:""},buttonLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},maxQuantity:{required:!1,tsType:{name:"number"},description:""}}};export{A};
