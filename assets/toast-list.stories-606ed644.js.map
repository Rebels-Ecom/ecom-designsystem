{"version":3,"file":"toast-list.stories-606ed644.js","sources":["../../src/design-system/components/organisms/toast-list/toast-list.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styles from './toast-list.module.css'\nimport cx from 'classnames'\nimport { ICartProduct } from '../../molecules/cart-product/cart-product'\nimport { ProductToast } from '../../molecules/product-toast/product-toast'\nimport { AnimatePresence } from 'framer-motion'\n\nexport type TToastPosition = 'top-left' | 'top-right'\nexport interface IToastList {\n  toastList: Array<ICartProduct>\n  autoCloseDelay?: number\n  position?: TToastPosition\n}\n\nfunction ToastList({ toastList, autoCloseDelay = 1000, position = 'top-right' }: IToastList) {\n  const [list, setList] = useState(toastList)\n\n  useEffect(() => {\n    setList([...toastList])\n  }, [toastList])\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (toastList.length && list.length) {\n        removeToast(toastList[0].product.productId)\n      }\n    }, autoCloseDelay)\n\n    return () => {\n      clearInterval(interval)\n    }\n  }, [toastList, list])\n\n  const removeToast = (id: string) => {\n    const listItemIndex = list.findIndex((e) => e.product.productId === id)\n    const toastListItem = toastList.findIndex((e) => e.product.productId === id)\n    list.splice(listItemIndex, 1)\n    toastList.splice(toastListItem, 1)\n    setList([...list])\n  }\n\n  if (!list) return null\n\n  return (\n    <div className={cx(styles.toastListContainer, styles[position])}>\n      <AnimatePresence>\n        {list.map((toast, i) => (\n          <ProductToast key={i} className={styles.toastWrapper} cartProduct={toast} position={position}></ProductToast>\n        ))}\n      </AnimatePresence>\n    </div>\n  )\n}\n\nexport { ToastList }\n"],"names":["ToastList","toastList","position","list","setList","useState","useEffect","interval","removeToast","autoCloseDelay","clearInterval","id","listItemIndex","e","toastListItem","_jsx","cx","styles","AnimatePresence","toast","i","ProductToast","toastWrapper"],"mappings":"s+BAcA,SAAAA,EAAA,CAAmB,UAAAC,EAAEA,eAAAA,EAAAA,IAA4B,SAAAC,EAAA,WAAyC,EAAA,CACxF,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAAJ,CAAA,EAEAK,EAAAA,UAAAA,IAAAA,CACEF,EAAAA,CAAAA,GAAAA,CAAAA,CAAAA,CAAsB,EAAA,CAAAH,CAAA,CAAA,EAGxBK,EAAAA,UAAAA,IAAAA,CACE,MAAAC,EAAA,YAAA,IAAA,CACEN,EAAA,QAAAE,EAAA,QACEK,EAAAA,EAAAA,CAAAA,EAAAA,QAAAA,SAAAA,CACF,EAAAC,CAAA,EAGF,MAAA,IAAA,CACEC,cAAAA,CAAAA,CAAsB,CACxB,EAAA,CAAAT,EAAAE,CAAA,CAAA,EAGF,MAAAK,EAAAG,GAAA,CACE,MAAAC,EAAAT,EAAA,UAAAU,GAAAA,EAAA,QAAA,YAAAF,CAAA,EACAG,EAAAb,EAAA,UAAAY,GAAAA,EAAA,QAAA,YAAAF,CAAA,EACAR,EAAAA,OAAAA,EAAAA,CAAAA,EACAF,EAAAA,OAAAA,EAAAA,CAAAA,EACAG,EAAAA,CAAAA,GAAAA,CAAAA,CAAAA,CAAiB,EAGnB,OAAAD,EAEAY,EAAA,MAAA,CACE,UAAAC,EAAAC,EAAA,mBAAAA,EAAAf,CAAA,CAAA,EAA8D,SAAAa,EAAAG,EAAA,CAC5C,SAAAf,EAAA,IAAA,CAAAgB,EAAAC,IAAAL,EAAAM,EAAA,CAEC,UAAAJ,EAAA,aAA2BK,YAAAA,EAA2BH,SAAAA,CAAOjB,EAAAA,CAAAA,CAAAA,CAC3E,CAAA,CACc,CAAA,EARV,IAWb;;;;;;"}