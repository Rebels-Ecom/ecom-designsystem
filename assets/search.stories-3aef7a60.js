import{r as t,j as e}from"./jsx-runtime-03333307.js";import{I as k}from"./icon-a32914e5.js";import{I}from"./input-text-e1680c6c.js";import{B as T}from"./button-1f0f0554.js";import{c as q}from"./index-09749a66.js";import{u as L}from"./useOnClickOutside-9d2c35bb.js";import{u as B}from"./useCloseOnEscape-f124367e.js";import"./form-helper-af1dc92c.js";import"./button.module-0b94080e.js";import"./loader-5c06d14e.js";const w="_search_tngsh_1",G="_searchBar_tngsh_5",E="_searchInput_tngsh_45",O="_clearButton_tngsh_49",A="_searchResults_tngsh_60",P="_searchResultLink_tngsh_85",$="_active_tngsh_92",D="_searchResultItem_tngsh_97",Y="_serchResultItemLabel_tngsh_102",s={search:w,searchBar:G,searchInput:E,clearButton:O,searchResults:A,searchResultLink:P,active:$,searchResultItem:D,serchResultItemLabel:Y};function b({className:a,id:o,isOpen:i,setIsOpen:l,query:c,setQuery:n,setIsFocused:u,results:m,disabled:g,noResult:h,placeholder:p}){const f=t.useRef(null),r=t.useRef(null),y=t.useCallback(()=>(l(!1),(r==null?void 0:r.current)&&r.current.blur()),[l]);t.useCallback(()=>{l(!0),u(!0)},[l,u]);const N=t.useCallback(()=>{u(!1)},[u]),j=t.useCallback(d=>{i||l(!0),n(d.target.value)},[i,l,n]);function C(){return n(""),(r==null?void 0:r.current)&&r.current.focus()}return L({ref:f,onClose:y}),B({onClose:y,isOpen:i}),e.jsxs("div",{ref:f,className:q(s.search,a),children:[e.jsxs("div",{className:s.searchBar,children:[e.jsx(T,{type:"button",surface:"tertiary",size:"x-small",children:e.jsx(k,{icon:"icon-search"})}),e.jsx(I,{ref:r,type:"text",id:o,onChange:j,value:c,onBlur:N,other:{autoComplete:"off"},disabled:g,placeholder:p,wrapperClassName:s.searchInput}),c&&e.jsx("button",{onClick:C,tabIndex:-1,type:"button",className:s.clearButton,children:e.jsx(k,{icon:"icon-x",className:"text-icon"})})]}),i&&c&&e.jsx("div",{className:s.searchResults,children:e.jsxs("ul",{"aria-labelledby":o,children:[m.map((d,S)=>e.jsx("li",{children:e.jsxs("a",{href:d.slug,className:s.searchResultLink,children:[e.jsx("span",{className:s.serchResultItemLabel,children:d.label}),d.text&&e.jsx("span",{children:" - "}),e.jsx("span",{className:s.serchResultItemText,children:d.text})]})},`${o}_${S}`)),m.length===0&&c.length?e.jsx("li",{children:e.jsxs("div",{className:s.serchResultItem,children:[e.jsx("span",{className:s.serchResultItemLabel,children:h.label}),h.text&&e.jsx("span",{children:"-"}),e.jsx("span",{className:s.serchResultItemText,children:h.text})]})},`search_no_result_${o}`):null]})})]})}b.__docgenInfo={description:"",methods:[],displayName:"Search",props:{id:{required:!0,tsType:{name:"string"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},setIsOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},setIsFocused:{required:!0,tsType:{name:"signature",type:"function",raw:"(isFocused: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isFocused"}],return:{name:"void"}}},description:""},query:{required:!0,tsType:{name:"string"},description:""},setQuery:{required:!0,tsType:{name:"signature",type:"function",raw:"(query: string) => void",signature:{arguments:[{type:{name:"string"},name:"query"}],return:{name:"void"}}},description:""},results:{required:!0,tsType:{name:"Array",elements:[{name:"IResult"}],raw:"Array<IResult>"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},noResult:{required:!0,tsType:{name:"ISearchNoResult"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const ee={title:"Design System/Atoms/Search",component:b},z={render:({...a})=>{const[o,i]=t.useState(a.isOpen),[l,c]=t.useState(!1),[n,u]=t.useState(a.query),[m,g]=t.useState([]);return t.useEffect(()=>{let h=new RegExp(n.toLowerCase(),"i");g(F.filter(p=>n&&p.label&&h.test(p.label.toLowerCase())))},[n]),e.jsx(b,{id:a.id,query:n,setQuery:u,results:m,disabled:a.disabled,isOpen:o,setIsOpen:i,setIsFocused:c,noResult:a.noResult,placeholder:a.placeholder})}},F=[{id:"NCG626689",label:"Ekoöl på riktigt",text:"Testa vår ekoöl",slug:"eko-ol"},{id:"NCG691725",label:"Loka årets vinnare",text:"Loka årets vinnare i sustainable brand index",slug:"loka-arets-vinnare"},{id:"NCG383172",label:"Spendrups hållbarhetsredovisning",text:"Läsa om Spendrups hållbarhetsredovisning",slug:"spendrups-hallbarhetsredovisning"},{id:"NCG521824",label:"Briska",text:"Briska",slug:"briska"},{id:"NCG583714",label:"Spring wine and spirits",text:"Vårens nya smak",slug:"spring-wine-spirits"},{id:"NCG769205",label:"Det här är vi",text:"Familjeföretaget med öl i blodet",slug:"om-oss"},{id:"NCG880524",label:"Kiviks musteri",text:"Prova nya cider",slug:"kiviks-cider"},{id:"NCG153793",label:"Här är nya Loka likes favorites",text:"loka likes favorites - smakar glass och kokos ",slug:"loka-favorites"},{id:"NCG660063",label:"Övrig läsk och vatten",text:"Övrig läsk och vatten",slug:"lask-och-vatten"}],x={...z,args:{id:"SearchId",results:[],isOpen:!1,disabled:!1,query:"",noResult:{label:"Your search returned no results",text:"Thank you, come again"},placeholder:"Placeholder text"}};var _,v,R;x.parameters={...x.parameters,docs:{...(_=x.parameters)==null?void 0:_.docs,source:{originalSource:`{
  ...SearchStoryTemplate,
  args: {
    id: 'SearchId',
    results: [],
    isOpen: false,
    disabled: false,
    query: '',
    noResult: {
      label: 'Your search returned no results',
      text: 'Thank you, come again'
    },
    placeholder: 'Placeholder text'
  }
}`,...(R=(v=x.parameters)==null?void 0:v.docs)==null?void 0:R.source}}};const se=["SearchStory"];export{x as SearchStory,se as __namedExportsOrder,ee as default};
