import{c as g}from"./index-09749a66.js";import{r as c,j as r}from"./jsx-runtime-03333307.js";import{P as q}from"./product-variant-ddb95308.js";import{u as v}from"./useOnClickOutside-9d2c35bb.js";import{I as S}from"./icon-button-aa68e962.js";import{A as k}from"./index-61679f6b.js";import{m as x}from"./motion-9380e2c6.js";import{I as C}from"./icon-a32914e5.js";const N="_productVariantList_uvd2p_1",E="_variantsList_uvd2p_5",O="_absolute_uvd2p_18",A="_hasScrollBar_uvd2p_27",R="_showMoreContainer_uvd2p_48",H="_showMoreBtn_uvd2p_59",F="_buttonClose_uvd2p_77",z="_listItem_uvd2p_85",a={productVariantList:N,variantsList:E,absolute:O,hasScrollBar:A,showMoreContainer:R,showMoreBtn:H,buttonClose:F,listItem:z},U=({className:d,variantsList:o,onVariantSelect:u,selectedVariantId:T,sellerOnlyTooltipText:b,onCloseVariants:p,isRestrictedUser:B,absolutePositioned:I,hideBottomBtn:y})=>{const[V,m]=c.useState(T),[i,h]=c.useState(!1),f=c.useRef(null),e=c.useRef(null);c.useEffect(()=>{var s;const t=n=>{var l;if(e!=null&&e.current){const _=Math.ceil(n.target.scrollHeight-((l=e.current)==null?void 0:l.getBoundingClientRect().height)||0);n.target.scrollTop>=_-20&&!i&&h(!0),n.target.scrollTop<_-20&&i&&h(!1)}};return(s=e.current)==null||s.addEventListener("scroll",t),()=>{var n;return(n=e.current)==null?void 0:n.removeEventListener("scroll",t)}},[i]);function w(t){const s=t.currentTarget.value;m(s);const n=o.find(l=>l.variantId===s);u(n,o)}function P(t){m(t);const s=o.find(n=>n.variantId===t);u(s,o)}function j(){var t;if(e!=null&&e.current){const s=Math.ceil(e.current.scrollHeight-((t=e.current)==null?void 0:t.getBoundingClientRect().height)||0);e.current.scrollTo({top:s??0,behavior:"smooth"})}}function M(){e!=null&&e.current&&e.current.scrollTo({top:0,behavior:"smooth"})}return v({ref:f,onClose:p}),r.jsxs("div",{ref:f,className:g(a.productVariantList,d||""),children:[r.jsx(S,{className:a.buttonClose,type:"button",onClick:()=>p(),icon:"icon-x",size:"large",isTransparent:!0,noBorder:!0,noPadding:!0}),r.jsxs("ul",{ref:e,className:g(a.variantsList,{[a.hasScrollBar]:(o==null?void 0:o.length)>2,[a.absolute]:I}),children:[o.map(t=>r.jsx("li",{className:a.listItem,children:r.jsx(q,{...t,onChange:w,onClick:P,checked:t.variantId===V,sellerOnlyTooltipText:b,isRestrictedUser:B},t.variantId)},t.variantId)),(o==null?void 0:o.length)>2&&!y&&r.jsx("div",{className:a.showMoreContainer,children:r.jsxs(k,{initial:!1,exitBeforeEnter:!0,children:[i&&r.jsx(x.button,{className:a.showMoreBtn,onClick:M,initial:{scale:.2},animate:{scale:i?1:0},exit:{scale:.2},transition:{duration:.2},children:r.jsx(C,{icon:"icon-chevron-up"})},"arrow-up"),!i&&r.jsx(x.button,{className:a.showMoreBtn,onClick:j,initial:{scale:.2},animate:{scale:i?0:1},exit:{scale:.2},transition:{duration:.2},children:r.jsx(C,{icon:"icon-chevron-down"})},"arrow-down")]})})]})]})};U.__docgenInfo={description:"",methods:[],displayName:"ProductVariantList",props:{className:{required:!1,tsType:{name:"string"},description:""},variantsList:{required:!0,tsType:{name:"Array",elements:[{name:"IProductVariant"}],raw:"Array<IProductVariant>"},description:""},onVariantSelect:{required:!0,tsType:{name:"CallableFunction"},description:""},selectedVariantId:{required:!0,tsType:{name:"string"},description:""},sellerOnlyTooltipText:{required:!1,tsType:{name:"string"},description:""},onCloseVariants:{required:!0,tsType:{name:"CallableFunction"},description:""},isRestrictedUser:{required:!1,tsType:{name:"boolean"},description:""},absolutePositioned:{required:!1,tsType:{name:"boolean"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},hideBottomBtn:{required:!1,tsType:{name:"boolean"},description:""}}};export{U as P};
