import{r as a}from"./index-6f814c40.js";import{I as g}from"./icon-8c95f315.js";import{I as L}from"./input-text-b673fc3a.js";import{B as E}from"./button-c74bbcb5.js";import{c as B}from"./index-74f03c09.js";import{j as h,a as s}from"./jsx-runtime-76c5c2e2.js";const V="_search_fceqe_1",w="_searchBar_fceqe_5",O="_searchInput_fceqe_34",T="_clearButton_fceqe_38",G="_searchResults_fceqe_49",j="_searchResultLink_fceqe_74",P="_active_fceqe_81",$="_searchResultItem_fceqe_86",z="_serchResultItemLabel_fceqe_91",l={search:V,searchBar:w,searchInput:O,clearButton:T,searchResults:G,searchResultLink:j,active:P,searchResultItem:$,serchResultItemLabel:z};function D({onClose:t,isOpen:n,disableClose:c}){a.useEffect(()=>{if(!(typeof document>"u"||c))return n?document.addEventListener("keydown",e):document.removeEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[n]);const e=r=>{(r==null?void 0:r.key)==="Escape"&&t()}}function K({ref:t,onClose:n,disableClose:c}){a.useEffect(()=>{if(c)return;const e=r=>{!t.current||t.current.contains(r.target)||n(r)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[t,n])}function _({className:t,id:n,isOpen:c,setIsOpen:e,query:r,setQuery:u,setIsFocused:i,results:f,disabled:y,noResult:m,placeholder:b}){const v=a.useRef(null),o=a.useRef(null),k=a.useCallback(()=>(e(!1),(o==null?void 0:o.current)&&o.current.blur()),[e]);a.useCallback(()=>{e(!0),i(!0)},[e,i]);const N=a.useCallback(()=>{i(!1)},[i]),q=a.useCallback(d=>{c||e(!0),u(d.target.value)},[c,e,u]);function C(){return u(""),(o==null?void 0:o.current)&&o.current.focus()}return K({ref:v,onClose:k}),D({onClose:k,isOpen:c}),h("div",{ref:v,className:B(l.search,t),children:[h("div",{className:l.searchBar,children:[s(E,{type:"button",surface:"tertiary",size:"x-small",children:s(g,{icon:"icon-search"})}),s(L,{ref:o,type:"text",id:n,onChange:q,value:r,onBlur:N,other:{autoComplete:"off"},disabled:y,placeholder:b,wrapperClassName:l.searchInput}),r&&s("button",{onClick:C,tabIndex:-1,type:"button",className:l.clearButton,children:s(g,{icon:"icon-x",className:"text-icon"})})]}),c&&r&&s("div",{className:l.searchResults,children:h("ul",{"aria-labelledby":n,children:[f.map((d,I)=>s("li",{children:h("a",{href:d.slug,className:l.searchResultLink,children:[s("span",{className:l.serchResultItemLabel,children:d.label}),d.text&&s("span",{children:" - "}),s("span",{className:l.serchResultItemText,children:d.text})]})},`${n}_${I}`)),f.length===0&&r.length?s("li",{children:h("div",{className:l.serchResultItem,children:[s("span",{className:l.serchResultItemLabel,children:m.label}),m.text&&s("span",{children:"-"}),s("span",{className:l.serchResultItemText,children:m.text})]})},`search_no_result_${n}`):null]})})]})}try{_.displayName="Search",_.__docgenInfo={description:"",displayName:"Search",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"(isOpen: boolean) => void"}},setIsFocused:{defaultValue:null,description:"",name:"setIsFocused",required:!0,type:{name:"(isFocused: boolean) => void"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},setQuery:{defaultValue:null,description:"",name:"setQuery",required:!0,type:{name:"(query: string) => void"}},results:{defaultValue:null,description:"",name:"results",required:!0,type:{name:"IResult[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},noResult:{defaultValue:null,description:"",name:"noResult",required:!0,type:{name:"ISearchNoResult"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Y={title:"Design System/Atoms/Search",component:_},A={render:({...t})=>{const[n,c]=a.useState(t.isOpen),[e,r]=a.useState(!1),[u,i]=a.useState(t.query),[f,y]=a.useState([]);return a.useEffect(()=>{let m=new RegExp(u.toLowerCase(),"i");y(F.filter(b=>u&&b.label&&m.test(b.label.toLowerCase())))},[u]),s(_,{id:t.id,query:u,setQuery:i,results:f,disabled:t.disabled,isOpen:n,setIsOpen:c,setIsFocused:r,noResult:t.noResult,placeholder:t.placeholder})}},F=[{id:"NCG626689",label:"Ekoöl på riktigt",text:"Testa vår ekoöl",slug:"eko-ol"},{id:"NCG691725",label:"Loka årets vinnare",text:"Loka årets vinnare i sustainable brand index",slug:"loka-arets-vinnare"},{id:"NCG383172",label:"Spendrups hållbarhetsredovisning",text:"Läsa om Spendrups hållbarhetsredovisning",slug:"spendrups-hallbarhetsredovisning"},{id:"NCG521824",label:"Briska",text:"Briska",slug:"briska"},{id:"NCG583714",label:"Spring wine and spirits",text:"Vårens nya smak",slug:"spring-wine-spirits"},{id:"NCG769205",label:"Det här är vi",text:"Familjeföretaget med öl i blodet",slug:"om-oss"},{id:"NCG880524",label:"Kiviks musteri",text:"Prova nya cider",slug:"kiviks-cider"},{id:"NCG153793",label:"Här är nya Loka likes favorites",text:"loka likes favorites - smakar glass och kokos ",slug:"loka-favorites"},{id:"NCG660063",label:"Övrig läsk och vatten",text:"Övrig läsk och vatten",slug:"lask-och-vatten"}],p={...A,args:{id:"SearchId",results:[],isOpen:!1,disabled:!1,query:"",noResult:{label:"Your search returned no results",text:"Thank you, come again"},placeholder:"Placeholder text"}};var x,R,S;p.parameters={...p.parameters,docs:{...(x=p.parameters)==null?void 0:x.docs,source:{originalSource:`{
  ...SearchStoryTemplate,
  args: {
    id: 'SearchId',
    results: [],
    isOpen: false,
    disabled: false,
    query: '',
    noResult: {
      label: 'Your search returned no results',
      text: 'Thank you, come again'
    },
    placeholder: 'Placeholder text'
  }
}`,...(S=(R=p.parameters)==null?void 0:R.docs)==null?void 0:S.source}}};const H=["SearchStory"],Z=Object.freeze(Object.defineProperty({__proto__:null,SearchStory:p,__namedExportsOrder:H,default:Y},Symbol.toStringTag,{value:"Module"}));export{_ as S,p as a,Z as s};
//# sourceMappingURL=search.stories-b936a222.js.map
