import{r as p}from"./index-6f814c40.js";import{U as R}from"./ui-link-da2491c1.js";import{j as _,a as l}from"./jsx-runtime-76c5c2e2.js";import{m as V}from"./motion-354a1bac.js";import{c as h}from"./index-74f03c09.js";import{I as C}from"./icon-17f6a5b2.js";import{H as T}from"./heading-e5a679a5.js";import{T as W}from"./text-3e056ff6.js";import{F as v}from"./flex-container-c88ed1e9.js";import{E as A}from"./expandable-wrapper-911222ad.js";import{B as P}from"./button-689f1284.js";const M=(e,r)=>{switch(e){case"email":return r&&E(r);case"password":return r&&I(r);default:return!0}},q=e=>e.required?e.pattern?!!M(e.pattern,e.value??e.originalValue)&&!!(e.value??e.originalValue):!!(e.value??e.originalValue):e.pattern?!!M(e.pattern,e.value??e.originalValue):!0,E=e=>e&&/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e),I=e=>e&&e!=="";try{q.displayName="validateField",q.__docgenInfo={description:"",displayName:"validateField",props:{error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"IUILink"}},originalValue:{defaultValue:null,description:"prefilled default value used to compare with the state controlled value in order to detect changes to the form",name:"originalValue",required:!1,type:{name:"string"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},focusOnRender:{defaultValue:null,description:"",name:"focusOnRender",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"opt out of errors component, which reserves space in the forms",name:"maxWidth",required:!1,type:{name:"string"}},onControlledChange:{defaultValue:null,description:"",name:"onControlledChange",required:!1,type:{name:"(((event: ChangeEvent<HTMLInputElement>) => void) & ((event: ChangeEvent<HTMLInputElement>) => void))"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean"}},dirty:{defaultValue:null,description:"",name:"dirty",required:!1,type:{name:"boolean"}},fieldType:{defaultValue:null,description:"decides what type of form field to render and what value types to use",name:"fieldType",required:!0,type:{name:'"input"'}},value:{defaultValue:null,description:"value is a form template controlled property updated by internal form template state",name:"value",required:!1,type:{name:"string"}},subtitle:{defaultValue:null,description:`Subtitle to be displayed in mobile list view
@example A subtitle can be "No phone number added", while a placeholder should be "Add phone number".`,name:"subtitle",required:!1,type:{name:"string"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"enum",value:[{value:'"email"'},{value:'"password"'},{value:'"phone"'}]}},alphaField:{defaultValue:null,description:"Field name to compare value with, e.g. confirm-password wants to match value with new-password",name:"alphaField",required:!1,type:{name:"string"}},betaField:{defaultValue:null,description:"Field name to re-validate, e.g. trigger confirm-password validation when new-password value updates",name:"betaField",required:!1,type:{name:"string"}},size:{defaultValue:{value:"'half'"},description:"Decides if a field should span 50% or 100% of parent width",name:"size",required:!1,type:{name:"enum",value:[{value:'"half"'},{value:'"full"'}]}}}}}catch{}try{E.displayName="isEmail",E.__docgenInfo={description:"",displayName:"isEmail",props:{}}}catch{}try{I.displayName="isPassword",I.__docgenInfo={description:"",displayName:"isPassword",props:{}}}catch{}const B="_form_d8bbv_1",O="_formDirectionRow_d8bbv_6",j="_formTitle_d8bbv_11",z="_field_d8bbv_15",S="_half_d8bbv_19",U="_full_d8bbv_23",$="_link_d8bbv_29",G="_linkDisabled_d8bbv_30",J="_generalErrorMessage_d8bbv_41",Q="_generalErrorMessageDisabled_d8bbv_47",X="_loaderContainer_d8bbv_57",Y="_successIcon_d8bbv_68",d={form:B,formDirectionRow:O,formTitle:j,field:z,half:S,full:U,link:$,linkDisabled:G,generalErrorMessage:J,generalErrorMessageDisabled:Q,loaderContainer:X,successIcon:Y},Z="_inputField_c84eu_1",ee="_label_c84eu_5",ae="_errorWrapper_c84eu_9",ne="_error_c84eu_9",le="_input_c84eu_1",y={inputField:Z,label:ee,errorWrapper:ae,error:ne,input:le},F=({onChange:e,onBlur:r,onControlledChange:o,...n})=>{const f=p.useCallback(t=>{t.persist(),e==null||e(t.target.value,n.name),o==null||o(t)},[n.name,e]),s=p.useCallback(t=>{t.persist(),r==null||r(t),o==null||o(t)},[r]);return _("div",{className:y.inputField,children:[n.label&&l("label",{className:y.label,children:n.label}),l("input",{"data-isinvalid":n.dirty&&!n.valid,type:n.type,name:n.name,inputMode:n.type==="number"?"decimal":void 0,placeholder:n.placeholder,className:y.input,step:"any",onChange:f,value:n.value??n.originalValue,min:n.min,max:n.max,disabled:n.disabled,readOnly:n.readonly,autoFocus:n.focusOnRender,onBlur:s}),l("div",{className:y.errorWrapper,children:l(V.label,{className:y.error,initial:{y:"-100%",opacity:0},animate:n.error&&!n.valid&&n.dirty?{y:0,opacity:1}:{y:"-100%",opacity:0},children:n.error})}),l("div",{className:y.linkWrapper,children:l(V.div,{className:y.error,initial:{y:"-100%",opacity:0},animate:n.action?{y:0,opacity:1}:{y:"-100%",opacity:0},children:n.action&&l(R,{...n.action})})})]})};try{F.displayName="InputField",F.__docgenInfo={description:"",displayName:"InputField",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},originalValue:{defaultValue:null,description:"",name:"originalValue",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},focusOnRender:{defaultValue:null,description:"",name:"focusOnRender",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"opt out of errors component, which reserves space in the forms",name:"maxWidth",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"whether the input should start in a touched state",name:"onChange",required:!1,type:{name:"((newVal: string, name: string) => void)"}},onControlledChange:{defaultValue:null,description:"",name:"onControlledChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},dirty:{defaultValue:null,description:"",name:"dirty",required:!1,type:{name:"boolean"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"IUILink"}}}}}catch{}const N=({onSubmit:e,onControlledSubmit:r,formTitle:o,formSubtitle:n,loading:f,responseMessage:s,...t})=>{const[c,k]=p.useState(t.fields),[x,H]=p.useState(!1),w=p.useRef(null);p.useEffect(()=>{if(!w.current)return;const a=!c.some(u=>u.required&&!u.valid);H(a)},[c]);const L=p.useCallback(a=>{a.preventDefault(),e==null||e(c),r==null||r(a)},[c,e]),D=p.useCallback((a,u)=>{c.find(m=>m.name===u)&&k(m=>m.map(i=>{if(i.name===u){if(i.alphaField){const g=m.find(K=>K.name===i.alphaField);return{...i,dirty:!0,valid:(g==null?void 0:g.value)===a,value:a}}return{...i,dirty:!0,valid:q({...i,value:a}),value:a}}else return i.alphaField?{...i,dirty:i.dirty,valid:i.value===a,value:i.name===u?a:i.value}:i}))},[]);return s?l(V.div,{initial:{opacity:0,scale:.2},animate:{opacity:s?1:0,scale:s?1:.2},children:_("div",{className:d.loaderContainer,children:[s.icon&&l(C,{icon:s.icon,className:d.successIcon}),s.title&&l(T,{order:3,noMargin:!0,children:s.title}),l(W,{align:"center",children:s.message})]})}):_("form",{ref:w,className:h(d.form,t.alignSubmitButtonHorizontally?d.formDirectionRow:""),onSubmit:L,children:[_("div",{children:[o&&l(T,{order:3,className:d.formTitle,children:o}),n&&l("p",{className:d.formSubtitle,children:n}),l(v,{wrap:!0,children:c==null?void 0:c.map((a,u)=>l("div",{className:h(d.field,d[a.size??"half"]),children:a.fieldType==="input"&&l(F,{...a,value:a.value??a.originalValue,onChange:(b,m)=>{D(b,m)},onControlledChange:b=>{var m;(m=a.onControlledChange)==null||m.call(a,b)},focusOnRender:u===0,readonly:a.blocked,disabled:f})},a.name))}),l(A,{open:!!t.generalErrorMessage,children:l(v,{alignItems:"center",justifyContent:"center",children:t.generalErrorMessage&&l("p",{className:h(d.generalErrorMessage,{[d.generalErrorMessageDisabled]:f}),dangerouslySetInnerHTML:{__html:t.generalErrorMessage}})})})]}),t.captcha&&l(v,{justifyContent:"center",alignItems:"center",children:t.captcha}),t.actions&&l(v,{justifyContent:t.alignActions??"center",children:t.actions.map((a,u)=>l(P,{...a,disabled:a.type==="submit"?!x||a.disabled:a.disabled||f,loading:a.type==="submit"&&f},`${a.type}-${u}`))}),t.links&&l(v,{alignItems:t.alignActions??"center",flexDirection:"column",children:t.links.map((a,u)=>l("a",{className:h(d.link,{[d.linkDisabled]:f}),href:a.href,target:"_blank",children:a.name},`${a.name}-${u}`))})]})};try{N.displayName="Form",N.__docgenInfo={description:"",displayName:"Form",props:{formTitle:{defaultValue:null,description:"descriptive title to display on top of form",name:"formTitle",required:!0,type:{name:"string"}},formSubtitle:{defaultValue:null,description:"descriptive subtitle to display under formTitle",name:"formSubtitle",required:!1,type:{name:"string"}},onSubmit:{defaultValue:null,description:"submit that requires the complete form data",name:"onSubmit",required:!1,type:{name:"((data: TFormFieldType[]) => void)"}},onControlledSubmit:{defaultValue:null,description:"submit that requires only the react form event",name:"onControlledSubmit",required:!1,type:{name:"((event: FormEvent<HTMLFormElement>) => void)"}},loading:{defaultValue:null,description:"loading state which is necessary in order to disable form while loading",name:"loading",required:!0,type:{name:"boolean"}},fields:{defaultValue:null,description:"all fields to be rendered inside the form",name:"fields",required:!0,type:{name:"TFormFieldType[]"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"IButton[]"}},links:{defaultValue:null,description:"",name:"links",required:!1,type:{name:"TFormLink[]"}},alignActions:{defaultValue:null,description:"",name:"alignActions",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-start"'},{value:'"flex-end"'}]}},alignSubmitButtonHorizontally:{defaultValue:null,description:"",name:"alignSubmitButtonHorizontally",required:!1,type:{name:"boolean"}},generalErrorMessage:{defaultValue:null,description:"",name:"generalErrorMessage",required:!1,type:{name:"any"}},responseMessage:{defaultValue:null,description:"If true, a message will be displayed after submit response",name:"responseMessage",required:!1,type:{name:"TFormResponseMessage"}},captcha:{defaultValue:null,description:"",name:"captcha",required:!1,type:{name:"Element"}}}}}catch{}export{N as F,q as v};
//# sourceMappingURL=form-b6d1c44b.js.map
