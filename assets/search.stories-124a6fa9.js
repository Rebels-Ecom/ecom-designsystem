import{r as t}from"./index-6f814c40.js";import{I as R}from"./icon-eb31426b.js";import{I as B}from"./input-text-9b6e45e8.js";import{B as L}from"./button-e76f0a80.js";import{c as O}from"./index-74f03c09.js";import{j as h,a as e}from"./jsx-runtime-76c5c2e2.js";import{u as V,a as F}from"./useOnClickOutside-97ae9690.js";const E="_search_1u22s_1",G="_searchBar_1u22s_5",T="_searchButton_1u22s_11",w="_inputField_1u22s_18",j="_clearButton_1u22s_30",Q="_searchResults_1u22s_41",$="_searchResultLink_1u22s_66",P="_active_1u22s_73",z="_searchResultItem_1u22s_78",A="_serchResultItemLabel_1u22s_83",s={search:E,searchBar:G,searchButton:T,inputField:w,clearButton:j,searchResults:Q,searchResultLink:$,active:P,searchResultItem:z,serchResultItemLabel:A};function _({className:a,id:o,isOpen:c,setIsOpen:n,query:i,setQuery:l,setIsFocused:d,results:b,disabled:y,noResult:m,placeholder:f}){const g=t.useRef(null),r=t.useRef(null),k=t.useCallback(()=>(n(!1),(r==null?void 0:r.current)&&r.current.blur()),[n]);t.useCallback(()=>{n(!0),d(!0)},[n,d]);const N=t.useCallback(()=>{d(!1)},[d]),C=t.useCallback(p=>{c||n(!0),l(p.target.value)},[c,n,l]);function I(){return l(""),(r==null?void 0:r.current)&&r.current.focus()}return V({ref:g,onClose:k}),F({onClose:k,isOpen:c}),h("div",{ref:g,className:O(s.search,a),children:[h("div",{className:s.searchBar,children:[e(L,{className:s.searchButton,type:"button",surface:"primary",size:"small",children:e(R,{icon:"icon-search"})}),e(B,{ref:r,type:"text",id:o,onChange:C,value:i,className:s.inputField,onBlur:N,other:{autoComplete:"off"},disabled:y,placeholder:f}),i&&e("button",{onClick:I,tabIndex:-1,type:"button",className:s.clearButton,children:e(R,{icon:"icon-x",className:"text-icon"})})]}),c&&i&&e("div",{className:s.searchResults,children:h("ul",{"aria-labelledby":o,children:[b.map((p,q)=>e("li",{children:h("a",{href:p.slug,className:s.searchResultLink,children:[e("span",{className:s.serchResultItemLabel,children:p.label}),p.text&&e("span",{children:" - "}),e("span",{className:s.serchResultItemText,children:p.text})]})},`${o}_${q}`)),b.length===0&&i.length?e("li",{children:h("div",{className:s.serchResultItem,children:[e("span",{className:s.serchResultItemLabel,children:m.label}),m.text&&e("span",{children:"-"}),e("span",{className:s.serchResultItemText,children:m.text})]})},`search_no_result_${o}`):null]})})]})}try{_.displayName="Search",_.__docgenInfo={description:"",displayName:"Search",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"(isOpen: boolean) => void"}},setIsFocused:{defaultValue:null,description:"",name:"setIsFocused",required:!0,type:{name:"(isFocused: boolean) => void"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},setQuery:{defaultValue:null,description:"",name:"setQuery",required:!0,type:{name:"(query: string) => void"}},results:{defaultValue:null,description:"",name:"results",required:!0,type:{name:"IResult[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},noResult:{defaultValue:null,description:"",name:"noResult",required:!0,type:{name:"ISearchNoResult"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const D={title:"Design System/Atoms/Search",component:_},H=a=>{const[o,c]=t.useState(a.isOpen),[n,i]=t.useState(!1),[l,d]=t.useState(a.query),[b,y]=t.useState([]);return t.useEffect(()=>{let m=new RegExp(l.toLowerCase(),"i");y(K.filter(f=>l&&f.label&&m.test(f.label.toLowerCase())))},[l]),e(_,{id:a.id,query:l,setQuery:d,results:b,disabled:a.disabled,isOpen:o,setIsOpen:c,setIsFocused:i,noResult:a.noResult,placeholder:a.placeholder})},K=[{id:"NCG626689",label:"Ekoöl på riktigt",text:"Testa vår ekoöl",slug:"eko-ol"},{id:"NCG691725",label:"Loka årets vinnare",text:"Loka årets vinnare i sustainable brand index",slug:"loka-arets-vinnare"},{id:"NCG383172",label:"Spendrups hållbarhetsredovisning",text:"Läsa om Spendrups hållbarhetsredovisning",slug:"spendrups-hallbarhetsredovisning"},{id:"NCG521824",label:"Briska",text:"Briska",slug:"briska"},{id:"NCG583714",label:"Spring wine and spirits",text:"Vårens nya smak",slug:"spring-wine-spirits"},{id:"NCG769205",label:"Det här är vi",text:"Familjeföretaget med öl i blodet",slug:"om-oss"},{id:"NCG880524",label:"Kiviks musteri",text:"Prova nya cider",slug:"kiviks-cider"},{id:"NCG153793",label:"Här är nya Loka likes favorites",text:"loka likes favorites - smakar glass och kokos ",slug:"loka-favorites"},{id:"NCG660063",label:"Övrig läsk och vatten",text:"Övrig läsk och vatten",slug:"lask-och-vatten"}],u=H.bind({});u.title="Search Story";u.args={id:"SearchId",results:[],isOpen:!1,disabled:!1,query:"",noResult:{label:"Your search returned no results",text:"Thank you, come again"},placeholder:"Placeholder text"};var v,x,S;u.parameters={...u.parameters,docs:{...(v=u.parameters)==null?void 0:v.docs,source:{originalSource:`args => {
  const [isOpen, setIsOpen] = useState<boolean>(args.isOpen);
  const [isFocused, setIsFocused] = useState<boolean>(false);
  const [query, setQuery] = useState<string>(args.query);
  const [results, setResults] = useState<Array<any>>([]);
  useEffect(() => {
    let pattern = new RegExp(query.toLowerCase(), 'i');
    setResults(itemsToFilterOn.filter(item => query && item.label && pattern.test(item.label.toLowerCase())));
  }, [query]);
  return <Search id={args.id} query={query} setQuery={setQuery} results={results} disabled={args.disabled} isOpen={isOpen} setIsOpen={setIsOpen} setIsFocused={setIsFocused} noResult={args.noResult} placeholder={args.placeholder} />;
}`,...(S=(x=u.parameters)==null?void 0:x.docs)==null?void 0:S.source}}};const M=["SearchStory"],se=Object.freeze(Object.defineProperty({__proto__:null,SearchStory:u,__namedExportsOrder:M,default:D},Symbol.toStringTag,{value:"Module"}));export{_ as S,u as a,se as s};
//# sourceMappingURL=search.stories-124a6fa9.js.map
