{"version":3,"file":"product-card.stories-8b36a45a.js","sources":["../../src/design-system/components/molecules/product-card/product-card.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { getProductPicture } from '../../../../helpers/picture-helper'\nimport { IButton } from '../../atoms/button/button'\nimport { IProduct } from '../../../../types/product'\nimport { convertNumToStr } from '../../../../helpers/format-helper'\nimport fallbackProductImageUrl from '../../../../assets/fallback-images/defaultFallbackImage.svg'\nimport { ProductCardHorizontal } from '../product-card-horizontal/product-card-horizontal'\nimport { ProductCardVertical } from '../product-card-vertical/product-card-vertical'\nimport { IPicture } from '../../atoms/picture/picture'\n\nexport type TCardDisplayType = 'vertical' | 'horizontal'\n\nexport type TProductCardVertical = {\n  cardDisplay: 'vertical'\n  productImage: IPicture\n  variantsOpen?: boolean\n  handlePackageChange: CallableFunction\n  selectedVariantId?: string\n  onVariantsButtonClick: CallableFunction\n}\n\nexport type TProductCardHorizontal = {\n  cardDisplay: 'horizontal'\n  onClickRemoveProduct?: CallableFunction\n  removingProduct?: boolean\n}\n\nexport interface IProductCard {\n  cardDisplay: TCardDisplayType\n  product: IProduct\n  /**\n   * Sets a custom default quantity to start from\n   * @default 0\n   */\n  defaultQuantity?: string\n  addToCartButton: IButton\n  addToCart: CallableFunction\n  onChangeQuantity?: CallableFunction\n  hideCartButton?: boolean\n  linkComponent?: any\n  hideRemoveButton?: boolean\n  onRemoveProduct?: CallableFunction\n  productQuantityDisabled?: boolean\n  className?: string\n  changePackagingButton?: IButton\n  border?: boolean\n  campaign?: {\n    title: string\n    color: string\n  }\n  loading: boolean\n  buttonLoading?: boolean\n  disabled?: boolean\n  limitedProductText?: string\n  showFavoriteIcon?: boolean\n  isFavoriteIconActive?: boolean\n  onFavoriteIconClick?: CallableFunction\n  showAddToPurchaseListIcon?: boolean\n  onSaveToPurchaseListClick?: CallableFunction\n}\n\nexport type TProductCard = IProductCard & (TProductCardVertical | TProductCardHorizontal)\n\nfunction ProductCard({\n  cardDisplay,\n  product,\n  addToCartButton,\n  addToCart,\n  hideCartButton,\n  onChangeQuantity,\n  onRemoveProduct,\n  hideRemoveButton,\n  productQuantityDisabled,\n  loading,\n  changePackagingButton,\n  linkComponent: Link,\n  className,\n  defaultQuantity,\n  campaign,\n  border,\n  disabled,\n  buttonLoading,\n  limitedProductText,\n  showFavoriteIcon,\n  isFavoriteIconActive,\n  onFavoriteIconClick,\n  showAddToPurchaseListIcon,\n  onSaveToPurchaseListClick,\n}: TProductCard) {\n  if (!cardDisplay) {\n    throw new Error('cardDisplay must be assigned')\n  }\n\n  const { productId, productImageUrl, price, itemNumberPerSalesUnit, quantity } = product\n  const [variantsListOpen, setVariantsListOpen] = useState<boolean>(false)\n  const [myProduct, setProduct] = useState({\n    ...product,\n    productImage: getProductPicture(productId, productImageUrl),\n    quantity: quantity ? quantity : '1',\n    totalPrice: convertNumToStr(price * itemNumberPerSalesUnit * (defaultQuantity ?? quantity ? parseInt(defaultQuantity ?? quantity) : 0)),\n    selectedVariantId: productId,\n  })\n\n  function handleOnChangeQuantity(productQuantity: number) {\n    setProduct((prevState) => {\n      const newProduct = {\n        ...prevState,\n        quantity: productQuantity.toString(),\n        totalPrice: convertNumToStr(myProduct.price * myProduct.itemNumberPerSalesUnit * productQuantity),\n      }\n\n      onChangeQuantity?.(newProduct)\n\n      return newProduct\n    })\n  }\n\n  function handleVariantsButtonClick() {\n    setVariantsListOpen(true)\n  }\n\n  function handleRemoveProduct(id: string) {\n    onRemoveProduct && onRemoveProduct(id)\n  }\n\n  function handlePackageChange(selectedVariant: any) {\n    const quantity = myProduct.productId === selectedVariant.variantId ? parseInt(myProduct.quantity) : 1\n    setProduct((prevState) => ({\n      ...prevState,\n      productId: selectedVariant.variantId,\n      productImage: getProductPicture(selectedVariant.variantId, selectedVariant.imageUrl ? selectedVariant.imageUrl : fallbackProductImageUrl),\n      country: selectedVariant.country,\n      packaging: selectedVariant.variantName,\n      priceStr: selectedVariant.listPricePerUnitString,\n      price: selectedVariant.price,\n      salesUnit: selectedVariant.salesUnit,\n      itemNumberPerSalesUnit: selectedVariant.itemNumberPerSalesUnit,\n      totalPrice: convertNumToStr(selectedVariant.price * selectedVariant.itemNumberPerSalesUnit * quantity),\n      quantity: quantity.toString(),\n      selectedVariantId: selectedVariant.variantId,\n    }))\n    setVariantsListOpen(false)\n  }\n\n  if (cardDisplay === 'horizontal') {\n    return (\n      <ProductCardHorizontal\n        cardDisplay=\"horizontal\"\n        loading={loading}\n        product={myProduct}\n        onChangeQuantity={handleOnChangeQuantity}\n        productQuantityDisabled={productQuantityDisabled}\n        addToCartButton={addToCartButton}\n        addToCart={addToCart}\n        onClickRemoveProduct={handleRemoveProduct}\n        linkComponent={Link}\n        hideRemoveButton={hideRemoveButton}\n        className={className}\n        hideCartButton={hideCartButton}\n        defaultQuantity={defaultQuantity}\n        campaign={campaign}\n        border={border}\n        disabled={disabled}\n        buttonLoading={buttonLoading}\n        limitedProductText={limitedProductText}\n        showFavoriteIcon={showFavoriteIcon}\n        isFavoriteIconActive={isFavoriteIconActive}\n        onFavoriteIconClick={onFavoriteIconClick}\n        showAddToPurchaseListIcon={showAddToPurchaseListIcon}\n        onSaveToPurchaseListClick={onSaveToPurchaseListClick}\n      />\n    )\n  }\n  if (cardDisplay === 'vertical') {\n    return (\n      <ProductCardVertical\n        cardDisplay=\"vertical\"\n        loading={loading}\n        product={myProduct}\n        productImage={myProduct.productImage}\n        onChangeQuantity={handleOnChangeQuantity}\n        productQuantityDisabled={productQuantityDisabled}\n        addToCartButton={addToCartButton}\n        addToCart={addToCart}\n        changePackagingButton={changePackagingButton}\n        onVariantsButtonClick={handleVariantsButtonClick}\n        variantsOpen={variantsListOpen}\n        selectedVariantId={myProduct.selectedVariantId}\n        handlePackageChange={handlePackageChange}\n        linkComponent={Link}\n        className={className}\n        hideCartButton={hideCartButton}\n        defaultQuantity={defaultQuantity}\n        campaign={campaign}\n        disabled={disabled}\n        buttonLoading={buttonLoading}\n        limitedProductText={limitedProductText}\n        showFavoriteIcon={showFavoriteIcon}\n        isFavoriteIconActive={isFavoriteIconActive}\n        onFavoriteIconClick={onFavoriteIconClick}\n        showAddToPurchaseListIcon={showAddToPurchaseListIcon}\n        onSaveToPurchaseListClick={onSaveToPurchaseListClick}\n      />\n    )\n  }\n\n  return null\n}\n\nexport { ProductCard }\n"],"names":["ProductCard","cardDisplay","product","addToCartButton","addToCart","hideCartButton","onChangeQuantity","onRemoveProduct","hideRemoveButton","productQuantityDisabled","loading","changePackagingButton","Link","className","defaultQuantity","campaign","border","disabled","buttonLoading","limitedProductText","showFavoriteIcon","isFavoriteIconActive","onFavoriteIconClick","showAddToPurchaseListIcon","productId","productImageUrl","price","itemNumberPerSalesUnit","quantity","variantsListOpen","setVariantsListOpen","useState","myProduct","setProduct","convertNumToStr","handleOnChangeQuantity","productQuantity","newProduct","prevState","handleVariantsButtonClick","handleRemoveProduct","id","handlePackageChange","selectedVariant","quantity2","variantId","country","variantName","listPricePerUnitString","salesUnit","_jsx","ProductCardHorizontal","onSaveToPurchaseListClick","ProductCardVertical","productImage","selectedVariantId"],"mappings":"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"}