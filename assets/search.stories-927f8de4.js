import{r as a}from"./index-6f814c40.js";import{I as g}from"./icon-eb31426b.js";import{I}from"./input-text-3d4ace24.js";import{B as q}from"./button-bd205e3a.js";import{c as B}from"./index-74f03c09.js";import{j as h,a as s}from"./jsx-runtime-76c5c2e2.js";const V="_search_zs916_1",w="_searchBar_zs916_5",z="_clearButton_zs916_36",O="_searchResults_zs916_47",T="_searchResultLink_zs916_72",G="_active_zs916_79",j="_searchResultItem_zs916_84",P="_serchResultItemLabel_zs916_89",o={search:V,searchBar:w,clearButton:z,searchResults:O,searchResultLink:T,active:G,searchResultItem:j,serchResultItemLabel:P};function $({onClose:t,isOpen:n,disableClose:l}){a.useEffect(()=>{if(!(typeof document>"u"||l))return n?document.addEventListener("keydown",e):document.removeEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[n]);const e=r=>{(r==null?void 0:r.key)==="Escape"&&t()}}function D({ref:t,onClose:n,disableClose:l}){a.useEffect(()=>{if(l)return;const e=r=>{!t.current||t.current.contains(r.target)||n(r)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[t,n])}function y({className:t,id:n,isOpen:l,setIsOpen:e,query:r,setQuery:u,setIsFocused:i,results:f,disabled:v,noResult:m,placeholder:b}){const _=a.useRef(null),c=a.useRef(null),k=a.useCallback(()=>(e(!1),(c==null?void 0:c.current)&&c.current.blur()),[e]);a.useCallback(()=>{e(!0),i(!0)},[e,i]);const N=a.useCallback(()=>{i(!1)},[i]),C=a.useCallback(d=>{l||e(!0),u(d.target.value)},[l,e,u]);function L(){return u(""),(c==null?void 0:c.current)&&c.current.focus()}return D({ref:_,onClose:k}),$({onClose:k,isOpen:l}),h("div",{ref:_,className:B(o.search,t),children:[h("div",{className:o.searchBar,children:[s(q,{type:"button",surface:"tertiary",size:"x-small",children:s(g,{icon:"icon-search"})}),s(I,{ref:c,type:"text",id:n,onChange:C,value:r,onBlur:N,other:{autoComplete:"off"},disabled:v,placeholder:b}),r&&s("button",{onClick:L,tabIndex:-1,type:"button",className:o.clearButton,children:s(g,{icon:"icon-x",className:"text-icon"})})]}),l&&r&&s("div",{className:o.searchResults,children:h("ul",{"aria-labelledby":n,children:[f.map((d,E)=>s("li",{children:h("a",{href:d.slug,className:o.searchResultLink,children:[s("span",{className:o.serchResultItemLabel,children:d.label}),d.text&&s("span",{children:" - "}),s("span",{className:o.serchResultItemText,children:d.text})]})},`${n}_${E}`)),f.length===0&&r.length?s("li",{children:h("div",{className:o.serchResultItem,children:[s("span",{className:o.serchResultItemLabel,children:m.label}),m.text&&s("span",{children:"-"}),s("span",{className:o.serchResultItemText,children:m.text})]})},`search_no_result_${n}`):null]})})]})}try{y.displayName="Search",y.__docgenInfo={description:"",displayName:"Search",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"(isOpen: boolean) => void"}},setIsFocused:{defaultValue:null,description:"",name:"setIsFocused",required:!0,type:{name:"(isFocused: boolean) => void"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},setQuery:{defaultValue:null,description:"",name:"setQuery",required:!0,type:{name:"(query: string) => void"}},results:{defaultValue:null,description:"",name:"results",required:!0,type:{name:"IResult[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},noResult:{defaultValue:null,description:"",name:"noResult",required:!0,type:{name:"ISearchNoResult"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const K={title:"Design System/Atoms/Search",component:y},Y={render:({...t})=>{const[n,l]=a.useState(t.isOpen),[e,r]=a.useState(!1),[u,i]=a.useState(t.query),[f,v]=a.useState([]);return a.useEffect(()=>{let m=new RegExp(u.toLowerCase(),"i");v(A.filter(b=>u&&b.label&&m.test(b.label.toLowerCase())))},[u]),s(y,{id:t.id,query:u,setQuery:i,results:f,disabled:t.disabled,isOpen:n,setIsOpen:l,setIsFocused:r,noResult:t.noResult,placeholder:t.placeholder})}},A=[{id:"NCG626689",label:"Ekoöl på riktigt",text:"Testa vår ekoöl",slug:"eko-ol"},{id:"NCG691725",label:"Loka årets vinnare",text:"Loka årets vinnare i sustainable brand index",slug:"loka-arets-vinnare"},{id:"NCG383172",label:"Spendrups hållbarhetsredovisning",text:"Läsa om Spendrups hållbarhetsredovisning",slug:"spendrups-hallbarhetsredovisning"},{id:"NCG521824",label:"Briska",text:"Briska",slug:"briska"},{id:"NCG583714",label:"Spring wine and spirits",text:"Vårens nya smak",slug:"spring-wine-spirits"},{id:"NCG769205",label:"Det här är vi",text:"Familjeföretaget med öl i blodet",slug:"om-oss"},{id:"NCG880524",label:"Kiviks musteri",text:"Prova nya cider",slug:"kiviks-cider"},{id:"NCG153793",label:"Här är nya Loka likes favorites",text:"loka likes favorites - smakar glass och kokos ",slug:"loka-favorites"},{id:"NCG660063",label:"Övrig läsk och vatten",text:"Övrig läsk och vatten",slug:"lask-och-vatten"}],p={...Y,args:{id:"SearchId",results:[],isOpen:!1,disabled:!1,query:"",noResult:{label:"Your search returned no results",text:"Thank you, come again"},placeholder:"Placeholder text"}};var x,R,S;p.parameters={...p.parameters,docs:{...(x=p.parameters)==null?void 0:x.docs,source:{originalSource:`{
  ...SearchStoryTemplate,
  args: {
    id: 'SearchId',
    results: [],
    isOpen: false,
    disabled: false,
    query: '',
    noResult: {
      label: 'Your search returned no results',
      text: 'Thank you, come again'
    },
    placeholder: 'Placeholder text'
  }
}`,...(S=(R=p.parameters)==null?void 0:R.docs)==null?void 0:S.source}}};const F=["SearchStory"],X=Object.freeze(Object.defineProperty({__proto__:null,SearchStory:p,__namedExportsOrder:F,default:K},Symbol.toStringTag,{value:"Module"}));export{y as S,p as a,X as s};
//# sourceMappingURL=search.stories-927f8de4.js.map
