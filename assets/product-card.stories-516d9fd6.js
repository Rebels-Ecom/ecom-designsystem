import{r as S}from"./index-6f814c40.js";import{C as z}from"./card-image-f59eb7cd.js";import{c as p,P as R}from"./format-helper-c92b5c26.js";import{B as C}from"./button-08ef97ed.js";import{P as v}from"./product-variant-list-df040eb5.js";import{g as V,f as w}from"./picture-helper-9c89293f.js";import{a as u,j as G}from"./jsx-runtime-76c5c2e2.js";import{d as H,a as J}from"./dummy-product-a4cbc78e.js";import{ChangePackagingButtonStory as N,ButtonProductCardStory as q}from"./button.stories-6400eb39.js";const K="_productCard_15a0i_1",X="_productCardInput_15a0i_15",Y="_productCardBtn_15a0i_19",s={productCard:K,productCardInput:X,productCardBtn:Y},l=({productId:e,productName:t,productImageUrl:i,country:a,packaging:x,priceStr:L,price:m,salesUnit:A,itemNumberPerSalesUnit:g,tags:O,productVariantList:W,changePackagingButton:j,addToCartButton:$,addToCart:Q})=>{const[r,P]=S.useState({productId:e,productName:t,productImage:V(e,i),country:a,packaging:x,priceStr:L,price:m,salesUnit:A,itemNumberPerSalesUnit:g,quantity:"1",totalPrice:p(m*g),tags:O,productVariantList:W,selectedVariantId:e}),[D,y]=S.useState(!1);function E(n){const o=parseInt(n.target.value)||1;P({...r,quantity:o.toString(),totalPrice:p(r.price*r.itemNumberPerSalesUnit*o)})}function F(){y(!0)}function M(n){const o=r.productId===n.variantId?parseInt(r.quantity):1;P({...r,productId:n.variantId,productImage:n.image,country:n.country,packaging:n.variantName,priceStr:n.listPricePerUnitString,price:n.price,salesUnit:n.salesUnit,itemNumberPerSalesUnit:n.itemNumberPerSalesUnit,totalPrice:p(n.price*n.itemNumberPerSalesUnit*o),quantity:o.toString(),selectedVariantId:n.variantId}),y(!1)}return D?u(v,{className:s.productCard,variantsList:r.productVariantList,onVariantSelect:M,selectedVariantId:r.selectedVariantId}):G("div",{className:s.productCard,children:[u(z,{heading:r.productName,image:r.productImage,articleId:r.productId,country:r.country,packaging:r.packaging,unitPriceStr:r.priceStr,productTags:r.tags,fallbackImageUrl:w}),u(C,{...j,surface:"secondary",iconRight:{icon:"icon-layers"},rounded:!0,onClick:()=>F(),children:"Byt förpackning"}),u(R,{className:s.productCardInput,salesUnit:r.salesUnit,itemNumberPerSalesUnit:r.itemNumberPerSalesUnit,totalPrice:r.totalPrice,quantity:r.quantity,quantityInputId:r.productId,onChange:E}),u(C,{...$,className:s.productCardBtn,fullWidth:!0,onClick:()=>Q(r),children:"Lägg i kundvagn"})]})};try{l.displayName="ProductCard",l.__docgenInfo={description:"",displayName:"ProductCard",props:{product:{defaultValue:null,description:"",name:"product",required:!0,type:{name:"IProduct"}},changePackagingButton:{defaultValue:null,description:"",name:"changePackagingButton",required:!0,type:{name:"IButton"}},addToCartButton:{defaultValue:null,description:"",name:"addToCartButton",required:!0,type:{name:"IButton"}},addToCart:{defaultValue:null,description:"",name:"addToCart",required:!0,type:{name:"CallableFunction"}},productId:{defaultValue:null,description:"",name:"productId",required:!0,type:{name:"string"}},productName:{defaultValue:null,description:"",name:"productName",required:!0,type:{name:"string"}},productImageUrl:{defaultValue:null,description:"",name:"productImageUrl",required:!0,type:{name:"string"}},country:{defaultValue:null,description:"",name:"country",required:!0,type:{name:"string"}},packaging:{defaultValue:null,description:"",name:"packaging",required:!0,type:{name:"string"}},priceStr:{defaultValue:null,description:"",name:"priceStr",required:!0,type:{name:"string"}},price:{defaultValue:null,description:"",name:"price",required:!0,type:{name:"number"}},salesUnit:{defaultValue:null,description:"",name:"salesUnit",required:!0,type:{name:"string"}},itemNumberPerSalesUnit:{defaultValue:null,description:"",name:"itemNumberPerSalesUnit",required:!0,type:{name:"number"}},productVariantList:{defaultValue:null,description:"",name:"productVariantList",required:!0,type:{name:"IProductVariant[]"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"ITag[]"}},productDescription:{defaultValue:null,description:"",name:"productDescription",required:!1,type:{name:"string"}}}}}catch{}const Z={title:"Design System/Molecules/Product/ProductCard",component:l},k={render:({...e})=>{function t(i){alert(`Adding to cart - ${i.productName} - ${i.packaging}. Quantity: ${i.quantity}, Total: ${i.totalPrice}`)}return u(l,{...e,addToCart:t})}};function _(e){return e.map(t=>({text:t.Text,shape:t.Shape?t.Shape:"pill",color:t.Class}))}function tt(e,t){const i=t[0].VariantId;return t.map(a=>({productName:e,variantName:a.Name,variantId:a.VariantId,country:Array.isArray(a.ShortTexts)&&a.ShortTexts.length?a.ShortTexts[0]:"",listPricePerUnitString:a.ListPricePerUnitString,price:a.ListPricePerUnit,salesUnit:a.SalesUnit,itemNumberPerSalesUnit:a.UnitsPerBaseUnit,image:V(a.VariantId,a.PrimaryImageUrl),checked:a.VariantId===i,tags:_(a.Tags),onChange:()=>{}}))}function b(e){const t=e.Variants[0];return{productId:t.VariantId,productName:e.DisplayName,productImageUrl:t.PrimaryImageUrl,country:Array.isArray(t.ShortTexts)&&t.ShortTexts.length?t.ShortTexts[0]:"",packaging:t.VariantFullName,priceStr:t.ListPricePerUnitString,price:t.ListPricePerUnit,salesUnit:t.SalesUnit,itemNumberPerSalesUnit:t.UnitsPerBaseUnit,tags:_(t.Tags),productVariantList:tt(e.DisplayName,e.Variants)}}const rt=b(H),et=b(J),d={...k,args:{...rt,changePackagingButton:N.args,addToCartButton:q.args}},c={...k,args:{...et,changePackagingButton:N.args,addToCartButton:q.args}};var f,I,h;d.parameters={...d.parameters,docs:{...(f=d.parameters)==null?void 0:f.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    ...productArgs,
    changePackagingButton: ChangePackagingButtonStory.args,
    addToCartButton: ButtonProductCardStory.args
  }
}`,...(h=(I=d.parameters)==null?void 0:I.docs)==null?void 0:h.source}}};var U,T,B;c.parameters={...c.parameters,docs:{...(U=c.parameters)==null?void 0:U.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    ...productArgsWithTags,
    changePackagingButton: ChangePackagingButtonStory.args,
    addToCartButton: ButtonProductCardStory.args
  }
}`,...(B=(T=c.parameters)==null?void 0:T.docs)==null?void 0:B.source}}};const at=["ProductCardStory","ProductCardWithTagsStory"],mt=Object.freeze(Object.defineProperty({__proto__:null,ProductCardStory:d,ProductCardWithTagsStory:c,__namedExportsOrder:at,default:Z},Symbol.toStringTag,{value:"Module"}));export{l as P,d as a,mt as p};
//# sourceMappingURL=product-card.stories-516d9fd6.js.map
