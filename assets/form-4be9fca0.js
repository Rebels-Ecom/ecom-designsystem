import{r as m,j as n,a as y}from"./jsx-runtime-a3a6c0b8.js";import{I as R}from"./input-field-ddab1a83.js";import{c as h}from"./index-a587463d.js";import{m as A}from"./motion-54668070.js";import{I as B}from"./icon-5fefd509.js";import{H as I}from"./heading-49a03c05.js";import{T as K}from"./text-59fe9fb2.js";import{B as T}from"./button-369dade1.js";import{F as p}from"./flex-container-145d4933.js";import{E as S}from"./expandable-wrapper-5e4804ab.js";import{L as W}from"./link-button-8d451f62.js";const k=(a,o)=>{switch(a){case"email":return o&&_(o);case"password":return o&&b(o);case"age-verification":return o&&Number(o)>19;default:return!0}},v=a=>a.required?a.pattern?!!k(a.pattern,a.value??a.originalValue)&&!!(a.value??a.originalValue):!!(a.value??a.originalValue):a.pattern?!!k(a.pattern,a.value??a.originalValue):!0,_=a=>a&&/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(a),b=a=>a&&a!=="";try{v.displayName="validateField",v.__docgenInfo={description:"",displayName:"validateField",props:{error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},height:{defaultValue:{value:'"md" for mobile'},description:"height of the input. sm = height 2.5rem, md = 3rem",name:"height",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'}]}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"IUILink"}},originalValue:{defaultValue:null,description:"prefilled default value used to compare with the state controlled value in order to detect changes to the form",name:"originalValue",required:!1,type:{name:"string"}},focusOnRender:{defaultValue:null,description:"",name:"focusOnRender",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}},onControlledChange:{defaultValue:null,description:"",name:"onControlledChange",required:!1,type:{name:"(((event: ChangeEvent<HTMLInputElement>) => void) & ((event: ChangeEvent<HTMLInputElement>) => void))"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean"}},dirty:{defaultValue:null,description:"",name:"dirty",required:!1,type:{name:"boolean"}},fieldType:{defaultValue:null,description:"decides what type of form field to render and what value types to use",name:"fieldType",required:!0,type:{name:'"input"'}},value:{defaultValue:null,description:"value is a form template controlled property updated by internal form template state",name:"value",required:!1,type:{name:"string"}},subtitle:{defaultValue:null,description:`Subtitle to be displayed in mobile list view
@example A subtitle can be "No phone number added", while a placeholder should be "Add phone number".`,name:"subtitle",required:!1,type:{name:"string"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"enum",value:[{value:'"email"'},{value:'"password"'},{value:'"phone"'},{value:'"age-verification"'}]}},alphaField:{defaultValue:null,description:"Field name to compare value with, e.g. confirm-password wants to match value with new-password",name:"alphaField",required:!1,type:{name:"string"}},betaField:{defaultValue:null,description:"Field name to re-validate, e.g. trigger confirm-password validation when new-password value updates",name:"betaField",required:!1,type:{name:"string"}},size:{defaultValue:{value:"'half'"},description:"Decides if a field should span 50% or 100% of parent width",name:"size",required:!1,type:{name:"enum",value:[{value:'"half"'},{value:'"full"'}]}}}}}catch{}try{_.displayName="isEmail",_.__docgenInfo={description:"",displayName:"isEmail",props:{}}}catch{}try{b.displayName="isPassword",b.__docgenInfo={description:"",displayName:"isPassword",props:{}}}catch{}const $="_form_ph2cy_1",j="_formDirectionRow_ph2cy_6",z="_formTitle_ph2cy_11",P="_field_ph2cy_15",U="_half_ph2cy_19",O="_full_ph2cy_23",G="_actionsWrapper_ph2cy_29",J="_link_ph2cy_38",Q="_linkDisabled_ph2cy_39",X="_generalErrorMessage_ph2cy_50",Y="_generalErrorMessageDisabled_ph2cy_56",Z="_loaderContainer_ph2cy_66",ee="_successIcon_ph2cy_77",i={form:$,formDirectionRow:j,formTitle:z,field:P,half:U,full:O,actionsWrapper:G,link:J,linkDisabled:Q,generalErrorMessage:X,generalErrorMessageDisabled:Y,loaderContainer:Z,successIcon:ee},C=({onSubmit:a,onControlledSubmit:o,formTitle:V,formSubtitle:q,loading:c,responseMessage:s,...t})=>{var w,F;const[d,L]=m.useState(t.fields),[N,x]=m.useState(!1),E=m.useRef(null);m.useEffect(()=>{if(!E.current)return;const e=!d.some(l=>l.required&&!l.valid);x(e)},[d]);const M=m.useCallback(e=>{e.preventDefault(),a==null||a(d),o==null||o(e)},[d,a]),D=m.useCallback((e,l)=>{d.find(u=>u.name===l)&&L(u=>u.map(r=>{if(r.name===l){if(r.alphaField){const g=u.find(H=>H.name===r.alphaField);return{...r,dirty:!0,valid:(g==null?void 0:g.value)===e,value:e}}return{...r,dirty:!0,valid:v({...r,value:e}),value:e}}else return r.alphaField?{...r,dirty:r.dirty,valid:r.value===e,value:r.name===l?e:r.value}:r}))},[]);return s?n(A.div,{initial:{opacity:0,scale:.2},animate:{opacity:s?1:0,scale:s?1:.2},children:y("div",{className:i.loaderContainer,children:[s.icon&&n(B,{icon:s.icon,className:i.successIcon}),s.title&&n(I,{order:3,noMargin:!0,children:s.title}),n(K,{align:"center",children:s.message}),s.onClose&&n(T,{type:"button",surface:"primary",onClick:s.onClose,children:s.closeLabel??"StÃ¤ng"})]})}):y("form",{ref:E,className:h(i.form,t.alignSubmitButtonHorizontally?i.formDirectionRow:""),onSubmit:M,children:[y("div",{children:[V&&n(I,{order:3,className:i.formTitle,children:V}),q&&n("p",{className:i.formSubtitle,children:q}),n(p,{wrap:!0,children:d==null?void 0:d.map((e,l)=>n("div",{className:h(i.field,i[e.size??"half"]),children:e.fieldType==="input"&&n(R,{...e,value:e.value??e.originalValue,onChange:(f,u)=>{D(f,u)},onControlledChange:f=>{var u;(u=e.onControlledChange)==null||u.call(e,f)},focusOnRender:l===0,readonly:e.blocked,disabled:c})},e.name))}),n(S,{open:!!t.generalErrorMessage,children:n(p,{alignItems:"center",justifyContent:"center",children:t.generalErrorMessage&&n("p",{className:h(i.generalErrorMessage,{[i.generalErrorMessageDisabled]:c}),dangerouslySetInnerHTML:{__html:t.generalErrorMessage}})})})]}),t.captcha&&n(p,{justifyContent:"center",alignItems:"center",children:t.captcha}),(t.actions||t.linkActions)&&y(p,{justifyContent:t.alignActions??"center",className:i.actionsWrapper,children:[(w=t.actions)==null?void 0:w.map((e,l)=>n(T,{...e,disabled:t.isLogin?!1:e.type==="submit"?!N||e.disabled:e.disabled||c,loading:e.type==="submit"&&c},`${e.type}-${l}`)),(F=t.linkActions)==null?void 0:F.map((e,l)=>n(W,{...e},`${e.id??"0"}-${l}`))]}),t.links&&n(p,{alignItems:t.alignActions??"center",flexDirection:"column",children:t.links.map((e,l)=>n("a",{className:h(i.link,{[i.linkDisabled]:c}),href:e.href,target:"_blank",children:e.name},`${e.name}-${l}`))})]})};try{C.displayName="Form",C.__docgenInfo={description:"",displayName:"Form",props:{formTitle:{defaultValue:null,description:"descriptive title to display on top of form",name:"formTitle",required:!0,type:{name:"string"}},formSubtitle:{defaultValue:null,description:"descriptive subtitle to display under formTitle",name:"formSubtitle",required:!1,type:{name:"string"}},onSubmit:{defaultValue:null,description:"submit that requires the complete form data",name:"onSubmit",required:!1,type:{name:"((data: TFormFieldType[]) => void)"}},onControlledSubmit:{defaultValue:null,description:"submit that requires only the react form event",name:"onControlledSubmit",required:!1,type:{name:"((event: FormEvent<HTMLFormElement>) => void)"}},loading:{defaultValue:null,description:"loading state which is necessary in order to disable form while loading",name:"loading",required:!0,type:{name:"boolean"}},fields:{defaultValue:null,description:"all fields to be rendered inside the form",name:"fields",required:!0,type:{name:"TFormFieldType[]"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"IButton[]"}},linkActions:{defaultValue:null,description:"Link buttons that will be rendered together with normal buttons/actions",name:"linkActions",required:!1,type:{name:"ILinkButton[]"}},links:{defaultValue:null,description:"",name:"links",required:!1,type:{name:"TFormLink[]"}},alignActions:{defaultValue:null,description:"",name:"alignActions",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-start"'},{value:'"flex-end"'}]}},alignSubmitButtonHorizontally:{defaultValue:null,description:"",name:"alignSubmitButtonHorizontally",required:!1,type:{name:"boolean"}},generalErrorMessage:{defaultValue:null,description:"",name:"generalErrorMessage",required:!1,type:{name:"any"}},responseMessage:{defaultValue:null,description:"If true, a message will be displayed after submit response",name:"responseMessage",required:!1,type:{name:"TFormResponseMessage"}},captcha:{defaultValue:null,description:"",name:"captcha",required:!1,type:{name:"Element"}},isLogin:{defaultValue:null,description:"Used for login form only, in order to avoid disabling submit button per default",name:"isLogin",required:!1,type:{name:"boolean"}}}}}catch{}export{C as F,v};
