import{r as s}from"./index-6f814c40.js";import{U as L}from"./ui-link-1bd4bf5e.js";import{j as T,a as l}from"./jsx-runtime-76c5c2e2.js";import{m as q}from"./motion-354a1bac.js";import{c as C}from"./index-74f03c09.js";import{H as k}from"./heading-e5a679a5.js";import{F as v}from"./flex-container-40f63f0c.js";import{E as K}from"./expandable-wrapper-911222ad.js";import{B as j}from"./button-df2f483d.js";const R="_form_1vjc2_1",W="_formTitle_1vjc2_7",A="_field_1vjc2_11",P="_half_1vjc2_15",B="_full_1vjc2_19",O="_generalErrorMessage_1vjc2_26",o={form:R,formTitle:W,field:A,half:P,full:B,generalErrorMessage:O},S="_inputField_c84eu_1",U="_label_c84eu_5",$="_errorWrapper_c84eu_9",D="_error_c84eu_9",z="_input_c84eu_1",m={inputField:S,label:U,errorWrapper:$,error:D,input:z},h=({onChange:e,onControlledChange:t,...a})=>{const p=s.useCallback(c=>{c.persist(),e==null||e(c.target.value,a.name),t==null||t(c)},[a.name,e]);return T("div",{className:m.inputField,children:[a.label&&l("label",{className:m.label,children:a.label}),l("input",{"data-isinvalid":a.dirty&&!a.valid,type:a.type,name:a.name,inputMode:a.type==="number"?"decimal":void 0,placeholder:a.placeholder,className:m.input,step:"any",onChange:p,value:a.value??a.originalValue,min:a.min,max:a.max,disabled:a.disabled,readOnly:a.readonly,autoFocus:a.focusOnRender}),l("div",{className:m.errorWrapper,children:l(q.label,{className:m.error,initial:{y:"-100%",opacity:0},animate:a.error&&!a.valid&&a.dirty?{y:0,opacity:1}:{y:"-100%",opacity:0},children:a.error})}),l("div",{className:m.linkWrapper,children:l(q.div,{className:m.error,initial:{y:"-100%",opacity:0},animate:a.action?{y:0,opacity:1}:{y:"-100%",opacity:0},children:a.action&&l(L,{...a.action})})})]})};try{h.displayName="InputField",h.__docgenInfo={description:"",displayName:"InputField",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},originalValue:{defaultValue:null,description:"",name:"originalValue",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},focusOnRender:{defaultValue:null,description:"",name:"focusOnRender",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"opt out of errors component, which reserves space in the forms",name:"maxWidth",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"whether the input should start in a touched state",name:"onChange",required:!1,type:{name:"((newVal: string, name: string) => void)"}},onControlledChange:{defaultValue:null,description:"",name:"onControlledChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>) => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},dirty:{defaultValue:null,description:"",name:"dirty",required:!1,type:{name:"boolean"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"IUILink"}}}}}catch{}const E=(e,t)=>{switch(e){case"email":return t&&V(t);case"password":return t&&_(t);default:return!0}},g=e=>e.required?e.pattern?!!E(e.pattern,e.value??e.originalValue)&&!!(e.value??e.originalValue):!!(e.value??e.originalValue):e.pattern?!!E(e.pattern,e.value??e.originalValue):!0,V=e=>e&&/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e),_=e=>e&&e!=="";try{g.displayName="validateField",g.__docgenInfo={description:"",displayName:"validateField",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"ChangeEventHandler<HTMLInputElement>"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},originalValue:{defaultValue:null,description:"prefilled default value used to compare with the state controlled value in order to detect changes to the form",name:"originalValue",required:!1,type:{name:"string"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},focusOnRender:{defaultValue:null,description:"",name:"focusOnRender",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"opt out of errors component, which reserves space in the forms",name:"maxWidth",required:!1,type:{name:"string"}},onControlledChange:{defaultValue:null,description:"",name:"onControlledChange",required:!1,type:{name:"(((event: ChangeEvent<HTMLInputElement>) => void) & ((event: ChangeEvent<HTMLInputElement>) => void))"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},dirty:{defaultValue:null,description:"",name:"dirty",required:!1,type:{name:"boolean"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"IUILink"}},fieldType:{defaultValue:null,description:"decides what type of form field to render and what value types to use",name:"fieldType",required:!0,type:{name:'"input"'}},value:{defaultValue:null,description:"value is a form template controlled property updated by internal form template state",name:"value",required:!1,type:{name:"string"}},subtitle:{defaultValue:null,description:`Subtitle to be displayed in mobile list view
@example A subtitle can be "No phone number added", while a placeholder should be "Add phone number".`,name:"subtitle",required:!1,type:{name:"string"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"enum",value:[{value:'"email"'},{value:'"password"'},{value:'"phone"'}]}},size:{defaultValue:{value:"'half'"},description:"Decides if a field should span 50% or 100% of parent width",name:"size",required:!1,type:{name:"enum",value:[{value:'"half"'},{value:'"full"'}]}}}}}catch{}try{V.displayName="isEmail",V.__docgenInfo={description:"",displayName:"isEmail",props:{}}}catch{}try{_.displayName="isPassword",_.__docgenInfo={description:"",displayName:"isPassword",props:{}}}catch{}const I=({onSubmit:e,onControlledSubmit:t,formTitle:a,formSubtitle:p,loading:c,...i})=>{const[u,F]=s.useState(i.fields),[G,M]=s.useState(!1),[N,w]=s.useState(!1),b=s.useRef(null);s.useEffect(()=>{if(!b.current)return;const n=!u.some(r=>r.required&&!r.valid);w(n)},[u]);const x=s.useCallback(n=>{e==null||e(u),t==null||t(n),M(!0)},[u,e]),H=s.useCallback((n,r)=>{u.find(d=>d.name===r)&&F(d=>d.map(y=>y.name===r?{...y,dirty:!0,valid:g({...y,value:n}),value:n}:y))},[]);return T("form",{ref:b,className:o.form,onSubmit:x,children:[a&&l(k,{order:3,className:o.formTitle,children:a}),p&&l("p",{className:o.formSubtitle,children:p}),l(v,{wrap:!0,children:u==null?void 0:u.map((n,r)=>l("div",{className:C(o.field,o[n.size??"half"]),children:n.fieldType==="input"&&l(h,{...n,value:n.value??n.originalValue,onChange:(f,d)=>{H(f,d)},onControlledChange:f=>{var d;(d=n.onControlledChange)==null||d.call(n,f)},focusOnRender:r===0,readonly:n.blocked,disabled:c})},n.name))}),l(K,{open:!!i.generalErrorMessage,children:l(v,{alignItems:"center",justifyContent:"center",children:i.generalErrorMessage&&l("p",{className:o.generalErrorMessage,dangerouslySetInnerHTML:{__html:i.generalErrorMessage}})})}),i.actions&&l(v,{justifyContent:i.alignActions??"center",children:i.actions.map((n,r)=>l(j,{...n,disabled:n.type==="submit"&&!N,loading:c},`${n.type}-${r}`))}),i.links&&l(v,{justifyContent:i.alignActions??"center",children:i.links.map((n,r)=>l("a",{className:o.link,href:n.href,target:"_blank",children:n.name},`${n.name}-${r}`))})]})};try{I.displayName="Form",I.__docgenInfo={description:"",displayName:"Form",props:{formTitle:{defaultValue:null,description:"descriptive title to display on top of form",name:"formTitle",required:!0,type:{name:"string"}},formSubtitle:{defaultValue:null,description:"descriptive subtitle to display under formTitle",name:"formSubtitle",required:!1,type:{name:"string"}},onSubmit:{defaultValue:null,description:"submit that requires the complete form data",name:"onSubmit",required:!1,type:{name:"((data: TFormFieldType[]) => void)"}},onControlledSubmit:{defaultValue:null,description:"submit that requires only the react form event",name:"onControlledSubmit",required:!1,type:{name:"((event: FormEvent<HTMLFormElement>) => void)"}},loading:{defaultValue:null,description:"loading state which is necessary in order to disable form while loading",name:"loading",required:!0,type:{name:"boolean"}},fields:{defaultValue:null,description:"all fields to be rendered inside the form",name:"fields",required:!0,type:{name:"TFormFieldType[]"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"IButton[]"}},links:{defaultValue:null,description:"",name:"links",required:!1,type:{name:"{ name: string; href: string; }[]"}},alignActions:{defaultValue:null,description:"",name:"alignActions",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-start"'},{value:'"flex-end"'}]}},generalErrorMessage:{defaultValue:null,description:"",name:"generalErrorMessage",required:!1,type:{name:"any"}}}}}catch{}export{I as F,g as v};
//# sourceMappingURL=form-e763f258.js.map
