{"version":3,"file":"modal.stories-bd9de377.js","sources":["../../src/design-system/hooks/usePortal.ts","../../src/design-system/components/molecules/modal/modal.tsx"],"sourcesContent":["// Inspired by https://www.30secondsofcode.org/react/s/use-portal\r\n\r\nimport { useCallback, useState, useEffect, ReactNode } from 'react'\r\nimport { createPortal, unmountComponentAtNode } from 'react-dom'\r\n\r\ninterface IPortalState {\r\n  render: (children?: any) => any\r\n  remove: () => void\r\n}\r\n\r\nexport const usePortal = (selector: HTMLElement | null) => {\r\n  const [portal, setPortal] = useState<IPortalState>({\r\n    render: () => null,\r\n    remove: () => null,\r\n  })\r\n\r\n  const createPortalWithSelector = useCallback((selector: HTMLElement) => {\r\n    const Portal = ({ children }: { children: ReactNode }) => createPortal(children, selector)\r\n    const remove = () => unmountComponentAtNode(selector)\r\n\r\n    return {\r\n      render: Portal,\r\n      remove,\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selector) {\r\n      portal.remove()\r\n\r\n      const newPortal = createPortalWithSelector(selector) as unknown as IPortalState\r\n      setPortal(newPortal)\r\n\r\n      return () => {\r\n        newPortal.remove()\r\n      }\r\n    }\r\n  }, [selector])\r\n\r\n  return portal.render\r\n}\r\n\r\nexport default usePortal\r\n","\nimport React from 'react'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { usePortal } from '../../../hooks'\nimport { IconButton } from '../../atoms'\nimport styles from './modal.module.css'\nimport cx from 'classnames'\n\n\nexport type TModalBackdrop = 'dark' | 'light'\n\nexport interface IModal {\n    open: boolean\n    children: React.ReactNode\n    onClose: () => void\n    backdropType?: TModalBackdrop\n    dismissable?: boolean /** If true clicking outside the modal closes the modal.*/\n}\n\nfunction Modal ({ open, children, onClose, backdropType='dark', dismissable } : IModal) {\n\n    const Portal = usePortal(document.getElementById('portal'))\n\n    const Backdrop = ({ children, onClick } : {children: any, onClick:() => void }) => {\n        return (\n            <motion.div\n                className={cx(styles.backdrop, styles[backdropType])}\n                onClick={onClick}\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n            >\n                {children}\n            </motion.div>\n        )\n    }\n\n    const Dialog = ({ children, onClick } : {children: any, onClick:() => void }) => {\n        return (\n            <motion.div\n                className={styles.modal}\n                onClick={(e) => e.stopPropagation()}  \n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition= {{ duration: 0.3, ease: 'easeOut' }}\n                exit={{ opacity: 0, transition: {duration: 0.3} }}\n                >\n                <IconButton className={styles.buttonClose} onClick={onClick} icon={'icon-x'} size=\"large\" isTransparent isLink={false} linkComponent={undefined}/>\n                {children}\n            </motion.div>\n        )\n    }\n\n    return (\n        <Portal>\n            <AnimatePresence>\n                {open ? \n                    <Backdrop onClick={()=>{dismissable ? onClose() : ()=>{}}}>\n                        <Dialog onClick={onClose}>  {children}</Dialog>\n                    </Backdrop> \n                    : null\n                }\n            </AnimatePresence>\n        </Portal>\n    )\n}\n\nexport  { Modal }"],"names":["usePortal","selector","portal","setPortal","useState","createPortalWithSelector","useCallback","children","createPortal","unmountComponentAtNode","useEffect","newPortal","usePortal$1","Modal","open","onClose","dismissable","Portal","_jsx","AnimatePresence","children2","onClick","motion","cx","styles","backdropType","_jsxs","modal","IconButton","buttonClose","undefined"],"mappings":"84BAUa,MAAAA,EAAaC,GAAiC,CACzD,KAAM,CAACC,EAAQC,CAAS,EAAIC,WAAuB,CACjD,OAAQ,IAAM,KACd,OAAQ,IAAM,IAAA,CACf,EAEKC,EAA2BC,cAAaL,IAIrC,CACL,OAJa,CAAC,CAAE,SAAAM,KAAwCC,EAAAA,aAAaD,EAAUN,CAAQ,EAKvF,OAJa,IAAMQ,yBAAuBR,CAAQ,CAIlD,GAED,CAAE,CAAA,EAELS,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAIT,EAAU,CACZC,EAAO,OAAO,EAER,MAAAS,EAAYN,EAAyBJ,CAAQ,EACnD,OAAAE,EAAUQ,CAAS,EAEZ,IAAM,CACXA,EAAU,OAAO,CAAA,EAErB,EACC,CAACV,CAAQ,CAAC,EAENC,EAAO,MAChB,EAEAU,EAAeZ,iKCvBf,SAAAa,EAAA,CAAgB,KAAAC,EAAEA,SAAAA,EAAMP,QAAAA,EAAUQ,aAAAA,EAAAA,OAAsB,YAAAC,CAA6B,EAAA,CAEjF,MAAAC,EAAAjB,EAAA,SAAA,eAAA,QAAA,CAAA,EAgCA,OAAAkB,EAAAD,EAAA,CACW,SAAAC,EAAAC,EAAA,CACa,SAAAL,EAAAI,EAhCxB,CAAA,CAAkB,SAAAE,EAAEb,QAAAA,CAAUc,IAC1BH,EAAAI,EAAA,IAAA,CACe,UAAAC,EAAAC,EAAA,SAAAA,EAAAC,CAAA,CAAA,EAC4C,QAAAJ,EACnDA,QAAAA,CACS,QAAA,CAAW,EAAE,QAAA,CACb,QAAA,CAAW,EAAE,KAAA,CAChB,QAAA,CAAW,EAAE,SAAAD,CAElBb,CAAAA,EAuBW,CAEC,QAAA,IAAA,CAAeS,GAAAA,EAAAA,CAA+B,EAAC,SAAAU,EApBxE,CAAA,CAAgB,SAAAN,EAAEb,QAAAA,CAAUc,IACxBK,EAAAJ,EAAA,IAAA,CACe,UAAAE,EAAA,MACWG,QAAAA,GAAAA,EAAAA,gBAAAA,EACgB,QAAA,CACzB,QAAA,CAAW,EAAE,QAAA,CACb,QAAA,CAAW,EAAE,WAAA,CACT,SAAA,GAAY,KAAA,SAAW,EAAU,KAAA,CACxC,QAAA,EAAW,WAAA,CAAe,SAAA,EAAW,CAAG,EAAE,SAAA,CAAAT,EAAAU,EAAA,CAErC,UAAAJ,EAAA,YAAmBK,QAAAA,EAAaR,KAAAA,SAAwB,KAAA,QAAe,cAAA,GAAqB,OAAA,GAAS,cAAA,MAAsBS,CAAAA,EAAAA,CAAAA,CAC7H,CAAA,EASmD,CAC7C,QAAAf,EAAUA,SAAAA,CAAAA,KAAAA,CAAAA,CAAoB,CAAA,CAAS,CAAA,EAAA,IAEhD,CAAA,CAEO,CAAA,CAG7B;;;;;;;;;;;;;;;;;;"}