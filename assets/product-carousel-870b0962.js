import{R as ve,r as l}from"./index-6f814c40.js";import{c as H}from"./index-74f03c09.js";import{u as de}from"./useSwipe-848e627d.js";import{P as le}from"./product-card.stories-fbe9abbd.js";import{j as fe,a as w}from"./jsx-runtime-76c5c2e2.js";const he="_productCarousel_1cxpv_1",pe="_carouselContentWrapper_1cxpv_9",be="_carouselContent_1cxpv_9",ge="_carouselPagination_1cxpv_34",me="_paginationIndicator_1cxpv_41",xe="_paginationIndicatorActive_1cxpv_55",b={productCarousel:he,carouselContentWrapper:pe,carouselContent:be,carouselPagination:ge,paginationIndicator:me,paginationIndicatorActive:xe};var g=[],we=function(){return g.some(function(e){return e.activeTargets.length>0})},ze=function(){return g.some(function(e){return e.skippedTargets.length>0})},X="ResizeObserver loop completed with undelivered notifications.",ye=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:X}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=X),window.dispatchEvent(e)},y;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(y||(y={}));var m=function(e){return Object.freeze(e)},Ee=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,m(this)}return e}(),Z=function(){function e(t,r,n,i){return this.x=t,this.y=r,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,m(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,i=t.top,s=t.right,o=t.bottom,a=t.left,c=t.width,u=t.height;return{x:r,y:n,top:i,right:s,bottom:o,left:a,width:c,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),D=function(e){return e instanceof SVGElement&&"getBBox"in e},ee=function(e){if(D(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var i=e,s=i.offsetWidth,o=i.offsetHeight;return!(s||o||e.getClientRects().length)},q=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},Re=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},z=typeof window<"u"?window:{},O=new WeakMap,$=/auto|scroll/,Oe=/^tb|vertical/,Te=/msie|trident/i.test(z.navigator&&z.navigator.userAgent),v=function(e){return parseFloat(e||"0")},x=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new Ee((r?t:e)||0,(r?e:t)||0)},G=m({devicePixelContentBoxSize:x(),borderBoxSize:x(),contentBoxSize:x(),contentRect:new Z(0,0,0,0)}),te=function(e,t){if(t===void 0&&(t=!1),O.has(e)&&!t)return O.get(e);if(ee(e))return O.set(e,G),G;var r=getComputedStyle(e),n=D(e)&&e.ownerSVGElement&&e.getBBox(),i=!Te&&r.boxSizing==="border-box",s=Oe.test(r.writingMode||""),o=!n&&$.test(r.overflowY||""),a=!n&&$.test(r.overflowX||""),c=n?0:v(r.paddingTop),u=n?0:v(r.paddingRight),d=n?0:v(r.paddingBottom),f=n?0:v(r.paddingLeft),B=n?0:v(r.borderTopWidth),h=n?0:v(r.borderRightWidth),p=n?0:v(r.borderBottomWidth),oe=n?0:v(r.borderLeftWidth),L=f+u,M=c+d,_=oe+h,P=B+p,W=a?e.offsetHeight-P-e.clientHeight:0,F=o?e.offsetWidth-_-e.clientWidth:0,se=i?L+_:0,ae=i?M+P:0,E=n?n.width:v(r.width)-se-F,R=n?n.height:v(r.height)-ae-W,ce=E+L+F+_,ue=R+M+W+P,V=m({devicePixelContentBoxSize:x(Math.round(E*devicePixelRatio),Math.round(R*devicePixelRatio),s),borderBoxSize:x(ce,ue,s),contentBoxSize:x(E,R,s),contentRect:new Z(f,c,E,R)});return O.set(e,V),V},re=function(e,t,r){var n=te(e,r),i=n.borderBoxSize,s=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(t){case y.DEVICE_PIXEL_CONTENT_BOX:return o;case y.BORDER_BOX:return i;default:return s}},Ce=function(){function e(t){var r=te(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=m([r.borderBoxSize]),this.contentBoxSize=m([r.contentBoxSize]),this.devicePixelContentBoxSize=m([r.devicePixelContentBoxSize])}return e}(),ne=function(e){if(ee(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},Se=function(){var e=1/0,t=[];g.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(u){var d=new Ce(u.target),f=ne(u.target);a.push(d),u.lastReportedSize=re(u.target,u.observedBox),f<e&&(e=f)}),t.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var i=n[r];i()}return e},U=function(e){g.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(i){i.isActive()&&(ne(i.target)>e?r.activeTargets.push(i):r.skippedTargets.push(i))})})},Be=function(){var e=0;for(U(e);we();)e=Se(),U(e);return ze()&&ye(),e>0},I,ie=[],_e=function(){return ie.splice(0).forEach(function(e){return e()})},Pe=function(e){if(!I){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return _e()}).observe(r,n),I=function(){r.textContent="".concat(t?t--:t++)}}ie.push(e),I()},Ie=function(e){Pe(function(){requestAnimationFrame(e)})},S=0,ke=function(){return!!S},Ne=250,Ae={attributes:!0,characterData:!0,childList:!0,subtree:!0},J=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Y=function(e){return e===void 0&&(e=0),Date.now()+e},k=!1,De=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=Ne),!k){k=!0;var n=Y(t);Ie(function(){var i=!1;try{i=Be()}finally{if(k=!1,t=n-Y(),!ke())return;i?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Ae)};document.body?r():z.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),J.forEach(function(r){return z.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),J.forEach(function(r){return z.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),A=new De,j=function(e){!S&&e>0&&A.start(),S+=e,!S&&A.stop()},Le=function(e){return!D(e)&&!Re(e)&&getComputedStyle(e).display==="inline"},Me=function(){function e(t,r){this.target=t,this.observedBox=r||y.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=re(this.target,this.observedBox,!0);return Le(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),We=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}(),T=new WeakMap,K=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},C=function(){function e(){}return e.connect=function(t,r){var n=new We(t,r);T.set(t,n)},e.observe=function(t,r,n){var i=T.get(t),s=i.observationTargets.length===0;K(i.observationTargets,r)<0&&(s&&g.push(i),i.observationTargets.push(new Me(r,n&&n.box)),j(1),A.schedule())},e.unobserve=function(t,r){var n=T.get(t),i=K(n.observationTargets,r),s=n.observationTargets.length===1;i>=0&&(s&&g.splice(g.indexOf(n),1),n.observationTargets.splice(i,1),j(-1))},e.disconnect=function(t){var r=this,n=T.get(t);n.observationTargets.slice().forEach(function(i){return r.unobserve(t,i.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Fe=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");C.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!q(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");C.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!q(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");C.unobserve(this,t)},e.prototype.disconnect=function(){C.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const Ve=ve[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],He=Ve,Xe=e=>{const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),t},qe=Xe,$e=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:Fe;function Ge(){}function Ue(e,t){const r=Ye(),n=qe(t);return He(()=>{let i=!1;const s=e&&"current"in e?e.current:e;if(!s)return Ge;function o(a,c){i||n.current(a,c)}return r.subscribe(s,o),()=>{i=!0,r.unsubscribe(s,o)}},[e,r,n]),r.observer}function Je(){let e=!1,t=[];const r=new Map,n=new $e((i,s)=>{t=t.concat(i);function o(){const a=new Set;for(let c=0;c<t.length;c++){if(a.has(t[c].target))continue;a.add(t[c].target);const u=r.get(t[c].target);u==null||u.forEach(d=>d(t[c],s))}t=[],e=!1}e||window.requestAnimationFrame(o),e=!0});return{observer:n,subscribe(i,s){var o;n.observe(i);const a=(o=r.get(i))!==null&&o!==void 0?o:[];a.push(s),r.set(i,a)},unsubscribe(i,s){var o;const a=(o=r.get(i))!==null&&o!==void 0?o:[];if(a.length===1){n.unobserve(i),r.delete(i);return}const c=a.indexOf(s);c!==-1&&a.splice(c,1),r.set(i,a)}}}let N;const Ye=()=>N||(N=Je());function je(e){const[t,r]=l.useState();return l.useLayoutEffect(()=>{var n;r((n=e==null?void 0:e.current)==null?void 0:n.getBoundingClientRect())},[e]),Ue(e,n=>r(n.contentRect)),t}const Q=({productCards:e,addToCart:t})=>{const[r,n]=l.useState(0),[i,s]=l.useState(!0),o=l.useRef(null),a=je(o)||{width:0,height:0},c=270,u=(a==null?void 0:a.width)&&Math.ceil(e.length*c/a.width);l.useEffect(()=>{const h=setInterval(()=>{i&&d()},3e3);return()=>{h&&clearInterval(h)}});const d=()=>{n(u&&r===u-1?0:r+1)},f=()=>{n(u&&r===0?u-1:r-1)},B=de({onSwipedLeft:()=>d(),onSwipedRight:()=>f()});return fe("div",{ref:o,className:b.productCarousel,onMouseEnter:()=>s(!1),onMouseLeave:()=>s(!0),children:[w("div",{className:b.carouselContentWrapper,...B,children:w("div",{className:b.carouselContent,style:{transform:`translateX(-${r*100}%)`},children:e.map((h,p)=>w(le,{...h,addToCart:t},p))})}),w("div",{className:b.carouselPagination,children:Array.from(Array(u),(h,p)=>w("div",{className:p===r?H(b.paginationIndicator,b.paginationIndicatorActive):H(b.paginationIndicator),onClick:()=>n(p)},p))})]})};try{Q.displayName="ProductCarousel",Q.__docgenInfo={description:"",displayName:"ProductCarousel",props:{productCards:{defaultValue:null,description:"",name:"productCards",required:!0,type:{name:"TProductCard[]"}},addToCart:{defaultValue:null,description:"",name:"addToCart",required:!0,type:{name:"CallableFunction"}}}}}catch{}export{Q as P};
//# sourceMappingURL=product-carousel-870b0962.js.map
