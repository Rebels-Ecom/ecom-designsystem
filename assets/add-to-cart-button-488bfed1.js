import{r as p,j as n}from"./jsx-runtime-03333307.js";import{I as f}from"./icon-button-aa68e962.js";import{c as N}from"./index-09749a66.js";import{A as B}from"./index-61679f6b.js";import{m as y}from"./motion-9380e2c6.js";const j="_addToCartButton_kmspv_1",V="_button_kmspv_10",A="_inputWrapper_kmspv_25",F="_decrement_kmspv_35",w="_increment_kmspv_36",H="_quantityInput_kmspv_42",O="_visuallyHidden_kmspv_64",a={addToCartButton:j,button:V,inputWrapper:A,decrement:F,increment:w,quantityInput:H,visuallyHidden:O},W=({id:d,quantity:u=0,onClick:v,buttonLabel:_="",disabled:o=!1,onChange:i=()=>{},maxQuantity:l,className:b=""})=>{const[e,s]=p.useState(u),[h,m]=p.useState(!1);p.useEffect(()=>{s(u)},[u]);const x=r=>{const t=r.target.value,k=parseInt(t,10);if(t===""){s("");return}const c=Math.max(0,k||0);(l===void 0||c<=l)&&(s(c),i(c))},q=()=>{o||v()},g=()=>{m(!0)},C=()=>{m(!1),Number(e)<=0&&(s(0),i(0))},T=()=>{const r=typeof e=="string"?parseInt(e,10)||0:e,t=Math.min(r+1,l??r+1);s(t),i(t)},I=()=>{const r=typeof e=="string"?parseInt(e,10)||0:e,t=Math.max(r-1,0);s(t),i(t)};return n.jsx(B,{children:n.jsx("div",{className:N(a.addToCartButton,b),role:"group","aria-label":"Quantity changer",children:(e===0||e==="")&&!h?n.jsx(y.button,{className:a.button,onClick:q,initial:{scale:.2},animate:{scale:e===0?1:0},exit:{scale:.2},disabled:o,"aria-label":"Add item to cart",children:_},"add-button"):n.jsxs(y.div,{className:a.inputWrapper,initial:{scale:.2,opacity:0},animate:{scale:typeof e=="string"||Number(e)>0?1:0,opacity:typeof e=="string"||Number(e)>0?1:0},exit:{scale:.2,opacity:0},children:[n.jsx(f,{onClick:I,className:a.decrement,size:"small",icon:"icon-minus",type:"button",name:"Decrease quantity",noBorder:!0,surface:"white",disabled:o,round:!0}),n.jsx("label",{htmlFor:d,className:a.visuallyHidden,children:"Current quantity"}),n.jsx("input",{id:d,type:"number",value:e,onChange:x,onFocus:g,onBlur:C,className:a.quantityInput,"aria-label":"Current quantity",min:"0",placeholder:"0",disabled:o,size:4,"aria-live":"polite"}),n.jsx(f,{className:a.increment,size:"small",onClick:T,icon:"icon-plus",type:"button",name:"Increase quantity",noBorder:!0,surface:"white",round:!0,disabled:o})]},"quantity-controls")})})};W.__docgenInfo={description:"",methods:[],displayName:"AddToCartButton",props:{id:{required:!0,tsType:{name:"string"},description:""},quantity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},onClick:{required:!0,tsType:{name:"CallableFunction"},description:""},buttonLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},maxQuantity:{required:!1,tsType:{name:"number"},description:""}}};export{W as A};
