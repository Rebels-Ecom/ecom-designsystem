import{r,j as t}from"./jsx-runtime-03333307.js";import{c as p}from"./index-09749a66.js";import{u as E}from"./useOnClickOutside-9d2c35bb.js";import{m as a}from"./motion-9380e2c6.js";import{C as I}from"./content-wrapper-adfa8526.js";import{I as H}from"./icon-cf6ebd85.js";import{I as M}from"./icon-button-dbb2b0a4.js";const P="_desktopNavigation_1d7yu_1",R="_loading_1d7yu_8",z="_placeholderShimmer_1d7yu_1",F="_topLevel_1d7yu_17",J="_topLevelLinks_1d7yu_22",X="_topLevelLinkList_1d7yu_26",G="_topLevelLinkInner_1d7yu_40",K="_topLevelLinkActive_1d7yu_44",Q="_topLevelLink_1d7yu_22",U="_active_1d7yu_70",V="_topLevelTrigger_1d7yu_79",Y="_secondLevel_1d7yu_86",Z="_secondLevelInner_1d7yu_95",ee="_logoWrapper_1d7yu_102",ne="_secondLevelLinkList_1d7yu_106",te="_secondLevelLinkItem_1d7yu_117",ie="_secondLevelLinkActive_1d7yu_122",se="_secondLevelLink_1d7yu_106",oe="_thirdLevelList_1d7yu_167",ae="_thirdLevelListMaxWidth_1d7yu_177",re="_thirdLeveListItem_1d7yu_181",le="_thirdLevelLink_1d7yu_189",de="_closeButton_1d7yu_204",ce="_iconButton_1d7yu_210",n={desktopNavigation:P,loading:R,placeholderShimmer:z,topLevel:F,topLevelLinks:J,topLevelLinkList:X,topLevelLinkInner:G,topLevelLinkActive:K,topLevelLink:Q,active:U,topLevelTrigger:V,secondLevel:Y,secondLevelInner:Z,logoWrapper:ee,secondLevelLinkList:ne,secondLevelLinkItem:te,secondLevelLinkActive:ie,secondLevelLink:se,thirdLevelList:oe,thirdLevelListMaxWidth:ae,thirdLeveListItem:re,thirdLevelLink:le,closeButton:de,iconButton:ce},f=({categories:o,currentSlug:y,linkComponent:_,trackNavigation:l})=>{var x,N;const[i,c]=r.useState(),[L,h]=r.useState(),[C,A]=r.useState(),[S,$]=r.useState("auto"),[B,D]=r.useState("auto"),m=r.useRef(null),g=r.useRef(null);r.useEffect(()=>{var s,d;const e=window.innerHeight-(((d=(s=g==null?void 0:g.current)==null?void 0:s.getBoundingClientRect())==null?void 0:d.top)??0);$(e)},[L]),r.useEffect(()=>{const e=document.body;return e&&(i?e.classList.add("no-scroll"):e.classList.remove("no-scroll")),()=>{var s;return(s=e==null?void 0:e.classList)==null?void 0:s.remove("no-scroll")}},[i]);const b=()=>{const e=o.find(s=>!!(y!=null&&y.includes(s.href)));h(e)};r.useEffect(()=>{var e,s;b(),D(`${((s=(e=m==null?void 0:m.current)==null?void 0:e.getBoundingClientRect())==null?void 0:s.width)??1240}px`)},[]),E({ref:m,onClose:e=>{var s,d;(d=(s=e==null?void 0:e.srcElement)==null?void 0:s.classList)!=null&&d.contains(n.topLevelTrigger)||c(void 0)}});const O={"--second-level-width":B};return(o==null?void 0:o.length)===0?t.jsx(a.nav,{initial:{opacity:.1},animate:{opacity:1},className:p(n.desktopNavigation,n.loading)}):t.jsx(a.nav,{initial:{opacity:.1},animate:{opacity:1},className:n.desktopNavigation,style:O,children:t.jsx(I,{padding:0,children:t.jsxs(a.div,{className:n.topLevel,onHoverEnd:()=>b(),children:[t.jsx("div",{className:n.topLevelLinks,children:t.jsxs(a.ul,{className:n.topLevelLinkList,children:[o.map((e,s)=>t.jsxs(a.li,{className:n.topLevelLinkInner,onClick:()=>h(e),onHoverStart:()=>{h(e)},children:[(L==null?void 0:L.name)===e.name&&t.jsx(a.div,{className:n.topLevelLinkActive,layoutId:"activeLink",transition:{type:"spring",stiffness:200,damping:20}}),ue(e)&&t.jsx(_,{className:p(n.topLevelLink,n.topLevelTrigger,{[n.active]:i===e}),to:e.href,target:e.openInNewTab?"_blank":"_self",onClick:()=>{c(void 0),l==null||l(e.href)},"aria-label":`main menu top level – ${e.name}`,children:e.name},`${e.name}-${s}`),k(e)&&t.jsxs(a.button,{"aria-label":e.name,className:p(n.topLevelLink,n.topLevelTrigger,{[n.active]:i===e}),onClick:()=>{(i==null?void 0:i.name)===e.name?c(void 0):c(e)},children:[e.name,t.jsx(H,{className:n.topLevelTrigger,icon:(i==null?void 0:i.name)===e.name?"icon-chevron-up":"icon-chevron-down"})]},`${e.name}-${s}`)]},`${e.name}-${s}`)),t.jsx(a.li,{className:n.closeButton,initial:{scale:0,opacity:0},animate:i?{scale:1,opacity:1}:void 0,exit:{transition:{delay:0}},children:t.jsx(M,{name:"Close navigation",className:n.iconButton,icon:"icon-plus",type:"button",onClick:()=>c(void 0)})})]})}),t.jsx(a.div,{initial:{height:0},animate:{height:(x=i==null?void 0:i.links)!=null&&x.length?"auto":0},className:n.secondLevel,ref:g,children:t.jsx(I,{padding:0,children:t.jsx(a.div,{ref:m,className:n.secondLevelInner,style:{height:`${S}px`},initial:{y:"-100%",opacity:0},animate:(N=i==null?void 0:i.links)!=null&&N.length?{y:"0",opacity:1}:{y:"-100%",opacity:0,transition:{delay:.3}},children:t.jsx(a.ul,{className:n.secondLevelLinkList,children:k(i)?i.links.map((e,s)=>{var d,T;return t.jsx(a.li,{className:n.secondLevelLinkItem,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t.jsxs(t.Fragment,{children:[t.jsx(_,{className:p(n.secondLevelLink,{[n.active]:C===e}),to:e.href,target:e.openInNewTab?"_blank":"_self",onClick:()=>{A(e),c(void 0),l==null||l(e.href)},"aria-label":`main menu second level – ${e.name}`,children:e.name}),t.jsx("ul",{className:p(n.thirdLevelList,{[n.thirdLevelListMaxWidth]:((d=i==null?void 0:i.links)==null?void 0:d.length)>3}),children:(T=e.links)==null?void 0:T.map((u,W)=>t.jsx("li",{className:n.thirdLeveListItem,children:t.jsx(_,{to:u.href,target:u.openInNewTab?"_blank":"_self",className:n.thirdLevelLink,title:u.name,onClick:()=>{c(void 0),l==null||l(u.href)},"aria-label":`main menu third level – ${u.name}`,children:u.name})},`${u.href}-${W}`))})]})},`${e.name}-${s}`)}):null})})})})]})})})},ue=o=>o&&!k(o),k=o=>o&&"links"in o;f.__docgenInfo={description:"",methods:[],displayName:"DesktopNavigation",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},setIsOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(val: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"val"}],return:{name:"void"}}},description:""},categories:{required:!0,tsType:{name:"Array",elements:[{name:"union",raw:"TNavLink | TNavCategory",elements:[{name:"signature",type:"object",raw:`{
  // Link text / title
  name: string;
  // Path to destination
  href: string;
  // Boolean for toggling target="_blank"
  openInNewTab?: boolean;
  // Descriptive text
  description?: string;
  links?: never;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}},{key:"openInNewTab",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"links",value:{name:"never",required:!1}}]}},{name:"signature",type:"object",raw:`{
  // Link text / title
  name: string;
  // Path to destination
  href: string;
  // Boolean for toggling target="_blank"
  openInNewTab?: boolean;
  // Descriptive text
  description?: string;
  // Subtitle
  subtitle?: string;
  // Required sub level of links
  links: Array<TNavLink | TNavCategory>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}},{key:"openInNewTab",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"subtitle",value:{name:"string",required:!1}},{key:"links",value:{name:"Array",elements:[{name:"union",raw:"TNavLink | TNavCategory",elements:[{name:"signature",type:"object",raw:`{
  // Link text / title
  name: string;
  // Path to destination
  href: string;
  // Boolean for toggling target="_blank"
  openInNewTab?: boolean;
  // Descriptive text
  description?: string;
  links?: never;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}},{key:"openInNewTab",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"links",value:{name:"never",required:!1}}]}},{name:"TNavCategory"}]}],raw:"Array<TNavLink | TNavCategory>",required:!0}}]}}]}],raw:"Array<TNavLink | TNavCategory>"},description:""},currentSlug:{required:!0,tsType:{name:"string"},description:""},linkComponent:{required:!0,tsType:{name:"any"},description:""},initial:{required:!1,tsType:{name:"string"},description:""},isAuthenticated:{required:!1,tsType:{name:"boolean"},description:""},signOutLabel:{required:!1,tsType:{name:"string"},description:""},onSignOut:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},actions:{required:!1,tsType:{name:"JSX.Element"},description:""},trackNavigation:{required:!1,tsType:{name:"signature",type:"function",raw:"(target: string) => void",signature:{arguments:[{type:{name:"string"},name:"target"}],return:{name:"void"}}},description:""}}};const me={title:"Design System/Molecules/DesktopNavigation",component:f,tags:["autodocs"],parameters:{padding:!1}},v={render:o=>t.jsx(f,{...o,linkComponent:"a"}),args:{categories:[],isAuthenticated:!0,signOutLabel:"Logga ut",onSignOut:()=>alert("Logging out")}};var j,q,w;v.parameters={...v.parameters,docs:{...(j=v.parameters)==null?void 0:j.docs,source:{originalSource:`{
  render: args => {
    return <DesktopNavigation {...args} linkComponent='a' />;
  },
  args: {
    categories: [],
    isAuthenticated: true,
    signOutLabel: 'Logga ut',
    onSignOut: () => alert('Logging out')
  }
}`,...(w=(q=v.parameters)==null?void 0:q.docs)==null?void 0:w.source}}};const pe=["DefaultDesktopNavigation"],fe=Object.freeze(Object.defineProperty({__proto__:null,DefaultDesktopNavigation:v,__namedExportsOrder:pe,default:me},Symbol.toStringTag,{value:"Module"}));export{f as D,v as a,fe as d};
