import{r as i,a as d,j as l}from"./jsx-runtime-a3a6c0b8.js";import{P as q}from"./product-variant-e3039d03.js";import{c as g}from"./index-a587463d.js";import{u as k}from"./useOnClickOutside-338168d6.js";import{I as O}from"./icon-button-9255179d.js";import{A as E}from"./index-4058f88b.js";import{m as C}from"./motion-54668070.js";import{I as b}from"./icon-5fefd509.js";const R="_productVariantList_105u2_1",j="_variantsList_105u2_5",v="_absolute_105u2_18",H="_hasScrollBar_105u2_26",A="_showMoreContainer_105u2_47",F="_showMoreBtn_105u2_58",U="_buttonClose_105u2_76",z="_listItem_105u2_84",a={productVariantList:R,variantsList:j,absolute:v,hasScrollBar:H,showMoreContainer:A,showMoreBtn:F,buttonClose:U,listItem:z},I=({className:u,variantsList:o,onVariantSelect:m,selectedVariantId:B,sellerOnlyTooltipText:y,onCloseVariants:h,isRestrictedUser:P,absolutePositioned:w})=>{const[T,p]=i.useState(B),[s,f]=i.useState(!1),_=i.useRef(null),e=i.useRef(null);i.useEffect(()=>{var r;const t=n=>{var c;if(e!=null&&e.current){const V=Math.ceil(n.target.scrollHeight-((c=e.current)==null?void 0:c.getBoundingClientRect().height));n.target.scrollTop>=V-20&&!s&&f(!0),n.target.scrollTop<V-20&&s&&f(!1)}};return(r=e.current)==null||r.addEventListener("scroll",t),()=>{var n;return(n=e.current)==null?void 0:n.removeEventListener("scroll",t)}},[s]);function x(t){const r=t.currentTarget.value;p(r);const n=o.find(c=>c.variantId===r);m(n,o)}function M(t){p(t);const r=o.find(n=>n.variantId===t);m(r,o)}function S(){var t;if(e!=null&&e.current){const r=Math.ceil(e.current.scrollHeight-((t=e.current)==null?void 0:t.getBoundingClientRect().height));e.current.scrollTo({top:r??0,behavior:"smooth"})}}function N(){e!=null&&e.current&&e.current.scrollTo({top:0,behavior:"smooth"})}return k({ref:_,onClose:h}),d("div",{ref:_,className:g(a.productVariantList,u||""),children:[l(O,{className:a.buttonClose,type:"button",onClick:()=>h(),icon:"icon-x",size:"large",isTransparent:!0,noBorder:!0,noPadding:!0}),d("ul",{ref:e,className:g(a.variantsList,{[a.hasScrollBar]:(o==null?void 0:o.length)>2,[a.absolute]:w}),children:[o.map(t=>l("li",{className:a.listItem,children:l(q,{...t,onChange:x,onClick:M,checked:t.variantId===T,sellerOnlyTooltipText:y,isRestrictedUser:P},t.variantId)},t.variantId)),(o==null?void 0:o.length)>2&&l("div",{className:a.showMoreContainer,children:d(E,{initial:!1,exitBeforeEnter:!0,children:[s&&l(C.button,{className:a.showMoreBtn,onClick:N,initial:{scale:.2},animate:{scale:s?1:0},exit:{scale:.2},transition:{duration:.2},children:l(b,{icon:"icon-chevron-up"})},"arrow-up"),!s&&l(C.button,{className:a.showMoreBtn,onClick:S,initial:{scale:.2},animate:{scale:s?0:1},exit:{scale:.2},transition:{duration:.2},children:l(b,{icon:"icon-chevron-down"})},"arrow-down")]})})]})]})};try{I.displayName="ProductVariantList",I.__docgenInfo={description:"",displayName:"ProductVariantList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variantsList:{defaultValue:null,description:"",name:"variantsList",required:!0,type:{name:"IProductVariant[]"}},onVariantSelect:{defaultValue:null,description:"",name:"onVariantSelect",required:!0,type:{name:"CallableFunction"}},selectedVariantId:{defaultValue:null,description:"",name:"selectedVariantId",required:!0,type:{name:"string"}},sellerOnlyTooltipText:{defaultValue:null,description:"",name:"sellerOnlyTooltipText",required:!1,type:{name:"string"}},onCloseVariants:{defaultValue:null,description:"",name:"onCloseVariants",required:!0,type:{name:"CallableFunction"}},isRestrictedUser:{defaultValue:null,description:"",name:"isRestrictedUser",required:!1,type:{name:"boolean"}},absolutePositioned:{defaultValue:null,description:"",name:"absolutePositioned",required:!1,type:{name:"boolean"}}}}}catch{}export{I as P};
