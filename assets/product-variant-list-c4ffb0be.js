import{r as i,j as r}from"./jsx-runtime-03333307.js";import{P as M}from"./product-variant-9f1ad844.js";import{c as g}from"./index-09749a66.js";import{u as S}from"./useOnClickOutside-9d2c35bb.js";import{I as q}from"./icon-button-4ba5bdac.js";import{A as k}from"./index-61679f6b.js";import{m as x}from"./motion-9380e2c6.js";import{I as C}from"./icon-e3522fc5.js";const N="_productVariantList_105u2_1",E="_variantsList_105u2_5",O="_absolute_105u2_18",A="_hasScrollBar_105u2_26",R="_showMoreContainer_105u2_47",H="_showMoreBtn_105u2_58",v="_buttonClose_105u2_76",F="_listItem_105u2_84",a={productVariantList:N,variantsList:E,absolute:O,hasScrollBar:A,showMoreContainer:R,showMoreBtn:H,buttonClose:v,listItem:F},z=({className:u,variantsList:o,onVariantSelect:d,selectedVariantId:I,sellerOnlyTooltipText:T,onCloseVariants:h,isRestrictedUser:b,absolutePositioned:B})=>{const[V,m]=i.useState(I),[c,p]=i.useState(!1),f=i.useRef(null),e=i.useRef(null);i.useEffect(()=>{var s;const t=n=>{var l;if(e!=null&&e.current){const _=Math.ceil(n.target.scrollHeight-((l=e.current)==null?void 0:l.getBoundingClientRect().height));n.target.scrollTop>=_-20&&!c&&p(!0),n.target.scrollTop<_-20&&c&&p(!1)}};return(s=e.current)==null||s.addEventListener("scroll",t),()=>{var n;return(n=e.current)==null?void 0:n.removeEventListener("scroll",t)}},[c]);function w(t){const s=t.currentTarget.value;m(s);const n=o.find(l=>l.variantId===s);d(n,o)}function y(t){m(t);const s=o.find(n=>n.variantId===t);d(s,o)}function P(){var t;if(e!=null&&e.current){const s=Math.ceil(e.current.scrollHeight-((t=e.current)==null?void 0:t.getBoundingClientRect().height));e.current.scrollTo({top:s??0,behavior:"smooth"})}}function j(){e!=null&&e.current&&e.current.scrollTo({top:0,behavior:"smooth"})}return S({ref:f,onClose:h}),r.jsxs("div",{ref:f,className:g(a.productVariantList,u||""),children:[r.jsx(q,{className:a.buttonClose,type:"button",onClick:()=>h(),icon:"icon-x",size:"large",isTransparent:!0,noBorder:!0,noPadding:!0}),r.jsxs("ul",{ref:e,className:g(a.variantsList,{[a.hasScrollBar]:(o==null?void 0:o.length)>2,[a.absolute]:B}),children:[o.map(t=>r.jsx("li",{className:a.listItem,children:r.jsx(M,{...t,onChange:w,onClick:y,checked:t.variantId===V,sellerOnlyTooltipText:T,isRestrictedUser:b},t.variantId)},t.variantId)),(o==null?void 0:o.length)>2&&r.jsx("div",{className:a.showMoreContainer,children:r.jsxs(k,{initial:!1,exitBeforeEnter:!0,children:[c&&r.jsx(x.button,{className:a.showMoreBtn,onClick:j,initial:{scale:.2},animate:{scale:c?1:0},exit:{scale:.2},transition:{duration:.2},children:r.jsx(C,{icon:"icon-chevron-up"})},"arrow-up"),!c&&r.jsx(x.button,{className:a.showMoreBtn,onClick:P,initial:{scale:.2},animate:{scale:c?0:1},exit:{scale:.2},transition:{duration:.2},children:r.jsx(C,{icon:"icon-chevron-down"})},"arrow-down")]})})]})]})};z.__docgenInfo={description:"",methods:[],displayName:"ProductVariantList",props:{className:{required:!1,tsType:{name:"string"},description:""},variantsList:{required:!0,tsType:{name:"Array",elements:[{name:"IProductVariant"}],raw:"Array<IProductVariant>"},description:""},onVariantSelect:{required:!0,tsType:{name:"CallableFunction"},description:""},selectedVariantId:{required:!0,tsType:{name:"string"},description:""},sellerOnlyTooltipText:{required:!1,tsType:{name:"string"},description:""},onCloseVariants:{required:!0,tsType:{name:"CallableFunction"},description:""},isRestrictedUser:{required:!1,tsType:{name:"boolean"},description:""},absolutePositioned:{required:!1,tsType:{name:"boolean"},description:""}}};export{z as P};
