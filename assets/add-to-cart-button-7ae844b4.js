import{r as p,j as n}from"./jsx-runtime-03333307.js";import{I as f}from"./icon-button-c6bda5d8.js";import{A as k}from"./index-61679f6b.js";import{m as y}from"./motion-9380e2c6.js";const N="_addToCartButton_kmspv_1",B="_button_kmspv_10",j="_inputWrapper_kmspv_25",A="_decrement_kmspv_35",F="_increment_kmspv_36",V="_quantityInput_kmspv_42",w="_visuallyHidden_kmspv_64",a={addToCartButton:N,button:B,inputWrapper:j,decrement:A,increment:F,quantityInput:V,visuallyHidden:w},H=({id:d,quantity:u=0,onClick:v,buttonLabel:_="",disabled:i=!1,onChange:o=()=>{},maxQuantity:l})=>{const[e,s]=p.useState(u),[b,m]=p.useState(!1);p.useEffect(()=>{s(u)},[u]);const h=r=>{const t=r.target.value,I=parseInt(t,10);if(t===""){s("");return}const c=Math.max(0,I||0);(l===void 0||c<=l)&&(s(c),o(c))},x=()=>{i||v()},q=()=>{m(!0)},g=()=>{m(!1),Number(e)<=0&&(s(0),o(0))},C=()=>{const r=typeof e=="string"?parseInt(e,10)||0:e,t=Math.min(r+1,l??r+1);s(t),o(t)},T=()=>{const r=typeof e=="string"?parseInt(e,10)||0:e,t=Math.max(r-1,0);s(t),o(t)};return n.jsx(k,{children:n.jsx("div",{className:a.addToCartButton,role:"group","aria-label":"Quantity changer",children:(e===0||e==="")&&!b?n.jsx(y.button,{className:a.button,onClick:x,initial:{scale:.2},animate:{scale:e===0?1:0},exit:{scale:.2},disabled:i,"aria-label":"Add item to cart",children:_},"add-button"):n.jsxs(y.div,{className:a.inputWrapper,initial:{scale:.2,opacity:0},animate:{scale:typeof e=="string"||Number(e)>0?1:0,opacity:typeof e=="string"||Number(e)>0?1:0},exit:{scale:.2,opacity:0},children:[n.jsx(f,{onClick:T,className:a.decrement,size:"small",icon:"icon-minus",type:"button",name:"Decrease quantity",noBorder:!0,surface:"white",disabled:i,round:!0}),n.jsx("label",{htmlFor:d,className:a.visuallyHidden,children:"Current quantity"}),n.jsx("input",{id:d,type:"number",value:e,onChange:h,onFocus:q,onBlur:g,className:a.quantityInput,"aria-label":"Current quantity",min:"0",placeholder:"0",disabled:i,size:4,"aria-live":"polite"}),n.jsx(f,{className:a.increment,size:"small",onClick:C,icon:"icon-plus",type:"button",name:"Increase quantity",noBorder:!0,surface:"white",round:!0,disabled:i})]},"quantity-controls")})})};H.__docgenInfo={description:"",methods:[],displayName:"AddToCartButton",props:{id:{required:!0,tsType:{name:"string"},description:""},quantity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},onClick:{required:!0,tsType:{name:"CallableFunction"},description:""},buttonLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},maxQuantity:{required:!1,tsType:{name:"number"},description:""}}};export{H as A};
