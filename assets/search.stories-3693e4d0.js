import{r as a}from"./index-6f814c40.js";import{I as k}from"./icon-eb31426b.js";import{I as q}from"./input-text-9b6e45e8.js";import{B as E}from"./button-e76f0a80.js";import{c as B}from"./index-74f03c09.js";import{j as h,a as s}from"./jsx-runtime-76c5c2e2.js";const O="_search_1u22s_1",w="_searchBar_1u22s_5",V="_searchButton_1u22s_11",F="_inputField_1u22s_18",G="_clearButton_1u22s_30",T="_searchResults_1u22s_41",j="_searchResultLink_1u22s_66",Q="_active_1u22s_73",$="_searchResultItem_1u22s_78",P="_serchResultItemLabel_1u22s_83",l={search:O,searchBar:w,searchButton:V,inputField:F,clearButton:G,searchResults:T,searchResultLink:j,active:Q,searchResultItem:$,serchResultItemLabel:P};function z({onClose:t,isOpen:n,disableClose:u}){a.useEffect(()=>{if(!(typeof document>"u"||u))return n?document.addEventListener("keydown",e):document.removeEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[n]);const e=r=>{(r==null?void 0:r.key)==="Escape"&&t()}}function A({ref:t,onClose:n,disableClose:u}){a.useEffect(()=>{if(u)return;const e=r=>{!t.current||t.current.contains(r.target)||n(r)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[t,n])}function y({className:t,id:n,isOpen:u,setIsOpen:e,query:r,setQuery:c,setIsFocused:d,results:f,disabled:_,noResult:p,placeholder:b}){const g=a.useRef(null),o=a.useRef(null),v=a.useCallback(()=>(e(!1),(o==null?void 0:o.current)&&o.current.blur()),[e]);a.useCallback(()=>{e(!0),d(!0)},[e,d]);const N=a.useCallback(()=>{d(!1)},[d]),C=a.useCallback(m=>{u||e(!0),c(m.target.value)},[u,e,c]);function I(){return c(""),(o==null?void 0:o.current)&&o.current.focus()}return A({ref:g,onClose:v}),z({onClose:v,isOpen:u}),h("div",{ref:g,className:B(l.search,t),children:[h("div",{className:l.searchBar,children:[s(E,{className:l.searchButton,type:"button",surface:"primary",size:"small",children:s(k,{icon:"icon-search"})}),s(q,{ref:o,type:"text",id:n,onChange:C,value:r,className:l.inputField,onBlur:N,other:{autoComplete:"off"},disabled:_,placeholder:b}),r&&s("button",{onClick:I,tabIndex:-1,type:"button",className:l.clearButton,children:s(k,{icon:"icon-x",className:"text-icon"})})]}),u&&r&&s("div",{className:l.searchResults,children:h("ul",{"aria-labelledby":n,children:[f.map((m,L)=>s("li",{children:h("a",{href:m.slug,className:l.searchResultLink,children:[s("span",{className:l.serchResultItemLabel,children:m.label}),m.text&&s("span",{children:" - "}),s("span",{className:l.serchResultItemText,children:m.text})]})},`${n}_${L}`)),f.length===0&&r.length?s("li",{children:h("div",{className:l.serchResultItem,children:[s("span",{className:l.serchResultItemLabel,children:p.label}),p.text&&s("span",{children:"-"}),s("span",{className:l.serchResultItemText,children:p.text})]})},`search_no_result_${n}`):null]})})]})}try{y.displayName="Search",y.__docgenInfo={description:"",displayName:"Search",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"(isOpen: boolean) => void"}},setIsFocused:{defaultValue:null,description:"",name:"setIsFocused",required:!0,type:{name:"(isFocused: boolean) => void"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},setQuery:{defaultValue:null,description:"",name:"setQuery",required:!0,type:{name:"(query: string) => void"}},results:{defaultValue:null,description:"",name:"results",required:!0,type:{name:"IResult[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},noResult:{defaultValue:null,description:"",name:"noResult",required:!0,type:{name:"ISearchNoResult"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const D={title:"Design System/Atoms/Search",component:y},K=t=>{const[n,u]=a.useState(t.isOpen),[e,r]=a.useState(!1),[c,d]=a.useState(t.query),[f,_]=a.useState([]);return a.useEffect(()=>{let p=new RegExp(c.toLowerCase(),"i");_(H.filter(b=>c&&b.label&&p.test(b.label.toLowerCase())))},[c]),s(y,{id:t.id,query:c,setQuery:d,results:f,disabled:t.disabled,isOpen:n,setIsOpen:u,setIsFocused:r,noResult:t.noResult,placeholder:t.placeholder})},H=[{id:"NCG626689",label:"Ekoöl på riktigt",text:"Testa vår ekoöl",slug:"eko-ol"},{id:"NCG691725",label:"Loka årets vinnare",text:"Loka årets vinnare i sustainable brand index",slug:"loka-arets-vinnare"},{id:"NCG383172",label:"Spendrups hållbarhetsredovisning",text:"Läsa om Spendrups hållbarhetsredovisning",slug:"spendrups-hallbarhetsredovisning"},{id:"NCG521824",label:"Briska",text:"Briska",slug:"briska"},{id:"NCG583714",label:"Spring wine and spirits",text:"Vårens nya smak",slug:"spring-wine-spirits"},{id:"NCG769205",label:"Det här är vi",text:"Familjeföretaget med öl i blodet",slug:"om-oss"},{id:"NCG880524",label:"Kiviks musteri",text:"Prova nya cider",slug:"kiviks-cider"},{id:"NCG153793",label:"Här är nya Loka likes favorites",text:"loka likes favorites - smakar glass och kokos ",slug:"loka-favorites"},{id:"NCG660063",label:"Övrig läsk och vatten",text:"Övrig läsk och vatten",slug:"lask-och-vatten"}],i=K.bind({});i.title="Search Story";i.args={id:"SearchId",results:[],isOpen:!1,disabled:!1,query:"",noResult:{label:"Your search returned no results",text:"Thank you, come again"},placeholder:"Placeholder text"};var R,x,S;i.parameters={...i.parameters,docs:{...(R=i.parameters)==null?void 0:R.docs,source:{originalSource:`args => {
  const [isOpen, setIsOpen] = useState<boolean>(args.isOpen);
  const [isFocused, setIsFocused] = useState<boolean>(false);
  const [query, setQuery] = useState<string>(args.query);
  const [results, setResults] = useState<Array<any>>([]);
  useEffect(() => {
    let pattern = new RegExp(query.toLowerCase(), 'i');
    setResults(itemsToFilterOn.filter(item => query && item.label && pattern.test(item.label.toLowerCase())));
  }, [query]);
  return <Search id={args.id} query={query} setQuery={setQuery} results={results} disabled={args.disabled} isOpen={isOpen} setIsOpen={setIsOpen} setIsFocused={setIsFocused} noResult={args.noResult} placeholder={args.placeholder} />;
}`,...(S=(x=i.parameters)==null?void 0:x.docs)==null?void 0:S.source}}};const M=["SearchStory"],ee=Object.freeze(Object.defineProperty({__proto__:null,SearchStory:i,__namedExportsOrder:M,default:D},Symbol.toStringTag,{value:"Module"}));export{y as S,i as a,ee as s};
//# sourceMappingURL=search.stories-3693e4d0.js.map
