{"version":3,"file":"search-1f38a79c.js","sources":["../../src/design-system/components/atoms/search/search.tsx"],"sourcesContent":["import React, { useCallback, useRef } from 'react'\nimport styles from './search.module.css'\nimport { useCloseOnEscape, useOnClickOutside } from '../../../hooks'\nimport { Icon } from '../icon/icon'\nimport { InputText } from '../inputs/input-text/input-text'\nimport { Button } from '../button/button'\nimport cx from 'classnames'\n\nexport interface ISearchNoResult {\n  label: string\n  text: React.ReactNode | string\n}\n\nexport interface IResult {\n  label: string\n  text: string\n  slug: string\n}\n\nexport interface ISearch {\n  id: string\n  isOpen: boolean\n  setIsOpen: (isOpen: boolean) => void\n  setIsFocused: (isFocused: boolean) => void\n  query: string\n  setQuery: (query: string) => void\n  results: Array<IResult>\n  disabled?: boolean\n  noResult: ISearchNoResult\n  placeholder?: string\n  className?: string\n}\n\nfunction Search({ className, id, isOpen, setIsOpen, query, setQuery, setIsFocused, results, disabled, noResult, placeholder }: ISearch) {\n  const searchWrapperElement = useRef<HTMLDivElement | null>(null)\n  const inputField = useRef<HTMLInputElement | null>(null)\n\n  const onClose = useCallback(() => {\n    setIsOpen(false)\n    return inputField?.current && inputField.current.blur()\n  }, [setIsOpen])\n\n  const onFocus = useCallback(() => {\n    setIsOpen(true)\n    setIsFocused(true)\n  }, [setIsOpen, setIsFocused])\n\n  const onBlur = useCallback(() => {\n    setIsFocused(false)\n  }, [setIsFocused])\n\n  const onChange = useCallback(\n    (e: React.FocusEvent<HTMLInputElement>) => {\n      if (!isOpen) {\n        setIsOpen(true)\n      }\n      setQuery(e.target.value)\n    },\n    [isOpen, setIsOpen, setQuery]\n  )\n\n  function onClear() {\n    setQuery('')\n    return inputField?.current && inputField.current.focus()\n  }\n\n  useOnClickOutside({ ref: searchWrapperElement, onClose })\n  useCloseOnEscape({ onClose, isOpen })\n\n  return (\n    <div ref={searchWrapperElement} className={cx(styles.search, className)}>\n      <div className={styles.searchBar}>\n        <Button type=\"button\" surface=\"tertiary\" size=\"x-small\">\n          <Icon icon=\"icon-search\" />\n        </Button>\n        <InputText\n          ref={inputField}\n          type=\"text\"\n          id={id}\n          onChange={onChange}\n          value={query}\n          // onFocus={onFocus}\n          onBlur={onBlur}\n          other={{ autoComplete: 'off' }}\n          disabled={disabled}\n          placeholder={placeholder}\n          wrapperClassName={styles.searchInput}\n        />\n        {query && (\n          <button onClick={onClear} tabIndex={-1} type=\"button\" className={styles.clearButton}>\n            <Icon icon=\"icon-x\" className=\"text-icon\" />\n          </button>\n        )}\n      </div>\n\n      {isOpen && query && (\n        <div className={styles.searchResults}>\n          <ul aria-labelledby={id}>\n            {results.map((li: IResult, i: number) => (\n              <li key={`${id}_${i}`}>\n                <a href={li.slug} className={styles.searchResultLink}>\n                  <span className={styles.serchResultItemLabel}>{li.label}</span>\n                  {li.text && <span> - </span>}\n                  <span className={styles.serchResultItemText}>{li.text}</span>\n                </a>\n              </li>\n            ))}\n            {results.length === 0 && query.length ? (\n              <li key={`search_no_result_${id}`}>\n                <div className={styles.serchResultItem}>\n                  <span className={styles.serchResultItemLabel}>{noResult.label}</span>\n                  {noResult.text && <span>-</span>}\n                  <span className={styles.serchResultItemText}>{noResult.text}</span>\n                </div>\n              </li>\n            ) : null}\n          </ul>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport { Search }\n"],"names":["Search","className","id","isOpen","setIsOpen","query","setQuery","setIsFocused","results","disabled","noResult","searchWrapperElement","useRef","inputField","onClose","useCallback","onBlur","onChange","e","onClear","useOnClickOutside","useCloseOnEscape","_jsxs","styles","searchBar","_jsx","Icon","InputText","placeholder","searchInput","clearButton","searchResults","li","slug","searchResultLink","serchResultItemLabel","label","serchResultItemText","text","i","serchResultItem"],"mappings":"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"}