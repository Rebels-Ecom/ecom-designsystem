import{r as g}from"./index-6f814c40.js";import{g as z}from"./picture-helper-86177d87.js";import{c as y}from"./format-helper-6b4b1091.js";import{f as ne}from"./defaultFallbackImage-b43581a6.js";import{P as oe}from"./product-card-horizontal-91c2f3af.js";import{P as ie}from"./product-card-vertical-912ca4e8.js";import{a as P}from"./jsx-runtime-76c5c2e2.js";import{d as ue,a as de,b as le}from"./dummy-product-92e9cf71.js";function f({cardDisplay:a="vertical",product:e,changePackagingButton:o,addToCartButton:r,addToCart:h,hideCartButton:ye,onChangeQuantity:U,onRemoveProduct:I,hideRemoveButton:K,productQuantityDisabled:V,loading:q,linkComponent:N,className:k}){const{productId:b,productImageUrl:X,price:Y,itemNumberPerSalesUnit:Z,quantity:p}=e,[$,_]=g.useState(!1),[n,T]=g.useState({...e,productImage:z(b,X),quantity:p||"1",totalPrice:y(Y*Z*(p?parseInt(p):1)),selectedVariantId:b}),B=g.useRef(!1);function v(t){T(m=>({...m,quantity:t.toString(),totalPrice:y(n.price*n.itemNumberPerSalesUnit*t)}))}g.useEffect(()=>{if(!B.current){B.current=!0;return}U&&U(n)},[n.quantity]);function ee(){_(!0)}function re(t){I&&I(t)}function te(t){const m=n.productId===t.variantId?parseInt(n.quantity):1;T(ae=>({...ae,productId:t.variantId,productImage:z(t.variantId,t.imageUrl?t.imageUrl:ne),country:t.country,packaging:t.variantName,priceStr:t.listPricePerUnitString,price:t.price,salesUnit:t.salesUnit,itemNumberPerSalesUnit:t.itemNumberPerSalesUnit,totalPrice:y(t.price*t.itemNumberPerSalesUnit*m),quantity:m.toString(),selectedVariantId:t.variantId})),_(!1)}return a==="horizontal"?P(oe,{loading:q,product:n,onChangeQuantity:v,productQuantityDisabled:V,addToCartButton:r,addToCart:h,onClickRemoveProduct:re,linkComponent:N,hideRemoveButton:K,className:k}):P(ie,{loading:q,product:n,productImage:n.productImage,onChangeQuantity:v,productQuantityDisabled:V,addToCartButton:r,addToCart:h,changePackagingButton:o,onVariantsButtonClick:ee,variantsOpen:$,selectedVariantId:n.selectedVariantId,handlePackageChange:te,linkComponent:N,className:k})}try{f.displayName="ProductCard",f.__docgenInfo={description:"",displayName:"ProductCard",props:{product:{defaultValue:null,description:"",name:"product",required:!0,type:{name:"IProduct"}},changePackagingButton:{defaultValue:null,description:"",name:"changePackagingButton",required:!0,type:{name:"IButton"}},addToCartButton:{defaultValue:null,description:"",name:"addToCartButton",required:!0,type:{name:"IButton"}},addToCart:{defaultValue:null,description:"",name:"addToCart",required:!0,type:{name:"CallableFunction"}},onChangeQuantity:{defaultValue:null,description:"",name:"onChangeQuantity",required:!1,type:{name:"CallableFunction"}},hideCartButton:{defaultValue:null,description:"",name:"hideCartButton",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},linkComponent:{defaultValue:null,description:"",name:"linkComponent",required:!1,type:{name:"any"}},showLinkIcon:{defaultValue:null,description:"",name:"showLinkIcon",required:!1,type:{name:"boolean"}},cardDisplay:{defaultValue:{value:"vertical"},description:"",name:"cardDisplay",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},hideRemoveButton:{defaultValue:null,description:"",name:"hideRemoveButton",required:!1,type:{name:"boolean"}},onRemoveProduct:{defaultValue:null,description:"",name:"onRemoveProduct",required:!1,type:{name:"CallableFunction"}},productQuantityDisabled:{defaultValue:null,description:"",name:"productQuantityDisabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},productId:{defaultValue:null,description:"",name:"productId",required:!0,type:{name:"string"}},productName:{defaultValue:null,description:"",name:"productName",required:!0,type:{name:"string"}},productUrl:{defaultValue:null,description:"",name:"productUrl",required:!1,type:{name:"string"}},productImageUrl:{defaultValue:null,description:"",name:"productImageUrl",required:!0,type:{name:"string"}},country:{defaultValue:null,description:"",name:"country",required:!1,type:{name:"string"}},packaging:{defaultValue:null,description:"",name:"packaging",required:!0,type:{name:"string"}},priceStr:{defaultValue:null,description:"",name:"priceStr",required:!0,type:{name:"string"}},price:{defaultValue:null,description:"",name:"price",required:!0,type:{name:"number"}},salesUnit:{defaultValue:null,description:"",name:"salesUnit",required:!0,type:{name:"string"}},itemNumberPerSalesUnit:{defaultValue:null,description:"",name:"itemNumberPerSalesUnit",required:!0,type:{name:"number"}},quantity:{defaultValue:null,description:"",name:"quantity",required:!0,type:{name:"string"}},totalPrice:{defaultValue:null,description:"",name:"totalPrice",required:!0,type:{name:"string"}},productVariantList:{defaultValue:null,description:"",name:"productVariantList",required:!0,type:{name:"IProductVariant[]"}},tags:{defaultValue:null,description:"",name:"tags",required:!1,type:{name:"ITag[]"}}}}}catch{}const se={title:"Design System/Molecules/ProductCard",component:f},c={render:({...a})=>{function e(r){console.log("Showing toast with product...",r)}function o(r){console.log("Quantity change",r)}return P("div",{style:{width:"100%",marginTop:"2rem",marginLeft:"2rem"},children:P(f,{...a,addToCart:e,onChangeQuantity:o})})}};function J(a){return a.map(e=>({text:e.Text,shape:e.Shape?e.Shape:"pill",color:e.Class}))}function ce(a,e){const o=e[0].VariantId;return e.map(r=>({productName:a,variantName:r.Name,variantId:r.VariantId,country:Array.isArray(r.ShortTexts)&&r.ShortTexts.length?r.ShortTexts[0]:"",listPricePerUnitString:r.ListPricePerUnitString,price:r.ListPricePerUnit,salesUnit:r.SalesUnit,itemNumberPerSalesUnit:r.UnitsPerBaseUnit,imageUrl:r.PrimaryImageUrl,checked:r.VariantId===o,tags:J(r.Tags),onChange:()=>{}}))}function C(a){const e=a.Variants[0];return{productId:e.VariantId,productUrl:a.ProductUrl,productName:a.DisplayName,productImageUrl:e.PrimaryImageUrl,country:Array.isArray(e.ShortTexts)&&e.ShortTexts.length?e.ShortTexts[0]:"",packaging:e.VariantFullName,priceStr:e.ListPricePerUnitString,price:e.ListPricePerUnit,salesUnit:e.SalesUnit,itemNumberPerSalesUnit:e.UnitsPerBaseUnit,tags:J(e.Tags),quantity:"1",totalPrice:y(e.ListPricePerUnit*e.UnitsPerBaseUnit),productVariantList:ce(a.DisplayName,a.Variants)}}const pe=C(ue),S=C(de),me=C(le),i={...c,args:{product:S,linkComponent:"a"}},u={...c,args:{product:me,linkComponent:"a"}},d={...c,args:{product:S,loading:!0}},l={...c,args:{product:S,linkComponent:"a",cardDisplay:"horizontal"}},s={...c,args:{product:pe,loading:!1,linkComponent:"a",cardDisplay:"horizontal",hideRemoveButton:!0}};var L,A,x;i.parameters={...i.parameters,docs:{...(L=i.parameters)==null?void 0:L.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    product: productWineArgs,
    linkComponent: 'a'
  }
}`,...(x=(A=i.parameters)==null?void 0:A.docs)==null?void 0:x.source}}};var O,R,H;u.parameters={...u.parameters,docs:{...(O=u.parameters)==null?void 0:O.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    product: productNoVariantsArgs,
    linkComponent: 'a'
  }
}`,...(H=(R=u.parameters)==null?void 0:R.docs)==null?void 0:H.source}}};var Q,D,w;d.parameters={...d.parameters,docs:{...(Q=d.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    product: productWineArgs,
    loading: true
  }
}`,...(w=(D=d.parameters)==null?void 0:D.docs)==null?void 0:w.source}}};var W,F,j;l.parameters={...l.parameters,docs:{...(W=l.parameters)==null?void 0:W.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    product: productWineArgs,
    linkComponent: 'a',
    cardDisplay: 'horizontal'
  }
}`,...(j=(F=l.parameters)==null?void 0:F.docs)==null?void 0:j.source}}};var E,M,G;s.parameters={...s.parameters,docs:{...(E=s.parameters)==null?void 0:E.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    product: productBeerArgs,
    loading: false,
    linkComponent: 'a',
    cardDisplay: 'horizontal',
    hideRemoveButton: true
  }
}`,...(G=(M=s.parameters)==null?void 0:M.docs)==null?void 0:G.source}}};const ge=["ProductCardStory","ProductCardStory_NoVariants","ProductCardStory_Loading","ProductCardStory_Horizontal","ProductCardHorizontal_Horizontal_Beer"],qe=Object.freeze(Object.defineProperty({__proto__:null,ProductCardHorizontal_Horizontal_Beer:s,ProductCardStory:i,ProductCardStory_Horizontal:l,ProductCardStory_Loading:d,ProductCardStory_NoVariants:u,__namedExportsOrder:ge,default:se},Symbol.toStringTag,{value:"Module"}));export{f as P,i as a,qe as p};
//# sourceMappingURL=product-card.stories-0cce80b2.js.map
