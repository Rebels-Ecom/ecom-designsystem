{"version":3,"file":"modal.stories-d2f21c59.js","sources":["../../src/design-system/hooks/usePortal.ts","../../src/design-system/components/molecules/modal/modal.tsx"],"sourcesContent":["// Inspired by https://www.30secondsofcode.org/react/s/use-portal\r\n\r\nimport { useCallback, useState, useEffect, ReactNode } from 'react'\r\nimport { createPortal, unmountComponentAtNode } from 'react-dom'\r\n\r\ninterface IPortalState {\r\n  render: (children?: any) => any\r\n  remove: () => void\r\n}\r\n\r\nexport const usePortal = (selector: HTMLElement | null) => {\r\n  const [portal, setPortal] = useState<IPortalState>({\r\n    render: () => null,\r\n    remove: () => null,\r\n  })\r\n\r\n  const createPortalWithSelector = useCallback((selector: HTMLElement) => {\r\n    const Portal = ({ children }: { children: ReactNode }) => createPortal(children, selector)\r\n    const remove = () => unmountComponentAtNode(selector)\r\n\r\n    return {\r\n      render: Portal,\r\n      remove,\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selector) {\r\n      portal.remove()\r\n\r\n      const newPortal = createPortalWithSelector(selector) as unknown as IPortalState\r\n      setPortal(newPortal)\r\n\r\n      return () => {\r\n        newPortal.remove()\r\n      }\r\n    }\r\n  }, [selector])\r\n\r\n  return portal.render\r\n}\r\n\r\nexport default usePortal\r\n","import React, { useEffect, useState } from 'react'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { usePortal } from '../../../hooks'\nimport { IconButton } from '../../atoms'\nimport styles from './modal.module.css'\nimport cx from 'classnames'\n\nexport type TModalBackdrop = 'dark' | 'light'\n\nexport interface IModal {\n  open: boolean\n  children: React.ReactNode\n  onClose: () => void\n  backdropType?: TModalBackdrop\n  dismissable?: boolean /** If true clicking outside the modal closes the modal.*/\n}\n\nfunction Modal({ open, children, onClose, backdropType = 'dark', dismissable }: IModal) {\n  const [selector, setSelector] = useState<HTMLElement | null>(null)\n\n  useEffect(() => {\n    setSelector(document.getElementById('portal'))\n  }, [])\n\n  const Portal = usePortal(selector)\n\n  const Backdrop = ({ children, onClick }: { children: any; onClick: () => void }) => {\n    return (\n      <motion.div\n        className={cx(styles.backdrop, styles[backdropType])}\n        onClick={onClick}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n\n  const Dialog = ({ children, onClick }: { children: any; onClick: () => void }) => {\n    return (\n      <motion.div\n        className={styles.modal}\n        onClick={(e) => e.stopPropagation()}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.3, ease: 'easeOut' }}\n        exit={{ opacity: 0, transition: { duration: 0.3 } }}\n      >\n        <IconButton\n          type='button'\n          className={styles.buttonClose}\n          onClick={onClick}\n          icon='icon-x'\n          size=\"large\"\n          isTransparent\n          noBorder\n          noPadding\n        />\n        {children}\n      </motion.div>\n    )\n  }\n\n  return (\n    <Portal>\n      <AnimatePresence>\n        {open ? (\n          <Backdrop\n            onClick={() => {\n              dismissable ? onClose() : () => {}\n            }}\n          >\n            <Dialog onClick={onClose}> {children}</Dialog>\n          </Backdrop>\n        ) : null}\n      </AnimatePresence>\n    </Portal>\n  )\n}\n\nexport { Modal }\n"],"names":["usePortal","selector","portal","setPortal","useState","createPortalWithSelector","useCallback","children","createPortal","unmountComponentAtNode","useEffect","newPortal","usePortal$1","Modal","open","onClose","dismissable","setSelector","Portal","_jsx","AnimatePresence","children2","onClick","motion","cx","styles","backdropType","_jsxs","modal","IconButton","buttonClose"],"mappings":"m5BAUa,MAAAA,EAAaC,GAAiC,CACzD,KAAM,CAACC,EAAQC,CAAS,EAAIC,WAAuB,CACjD,OAAQ,IAAM,KACd,OAAQ,IAAM,IAAA,CACf,EAEKC,EAA2BC,cAAaL,IAIrC,CACL,OAJa,CAAC,CAAE,SAAAM,KAAwCC,EAAAA,aAAaD,EAAUN,CAAQ,EAKvF,OAJa,IAAMQ,yBAAuBR,CAAQ,CAIlD,GAED,CAAE,CAAA,EAELS,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAIT,EAAU,CACZC,EAAO,OAAO,EAER,MAAAS,EAAYN,EAAyBJ,CAAQ,EACnD,OAAAE,EAAUQ,CAAS,EAEZ,IAAM,CACXA,EAAU,OAAO,CAAA,EAErB,EACC,CAACV,CAAQ,CAAC,EAENC,EAAO,MAChB,EAEAU,EAAeZ,iKCzBf,SAAAa,EAAA,CAAe,KAAAC,EAAEA,SAAAA,EAAMP,QAAAA,EAAUQ,aAAAA,EAAAA,OAAwB,YAAAC,CAA4B,EAAA,CACnF,KAAA,CAAAf,EAAAgB,CAAA,EAAAb,EAAA,SAAA,IAAA,EAEAM,EAAAA,UAAAA,IAAAA,CACEO,EAAAA,SAAAA,eAAAA,QAAAA,CAAAA,CAA6C,EAAA,CAAA,CAAA,EAG/C,MAAAC,EAAAlB,EAAAC,CAAA,EAyCA,OAAAkB,EAAAD,EAAA,CACS,SAAAC,EAAAC,EAAA,CACW,SAAAN,EAAAK,EAzCpB,CAAA,CAAkB,SAAAE,EAAEd,QAAAA,CAAUe,IAC5BH,EAAAI,EAAA,IAAA,CACa,UAAAC,EAAAC,EAAA,SAAAA,EAAAC,CAAA,CAAA,EAC0C,QAAAJ,EACnDA,QAAAA,CACS,QAAA,CAAW,EAAE,QAAA,CACb,QAAA,CAAW,EAAE,KAAA,CAChB,QAAA,CAAW,EAAE,SAAAD,CAElBd,CAAAA,EAgCa,CAEH,QAAA,IAAA,CAELS,GAAAA,EAAAA,CAAiC,EACnC,SAAAW,EAhCV,CAAA,CAAgB,SAAAN,EAAEd,QAAAA,CAAUe,IAC1BK,EAAAJ,EAAA,IAAA,CACa,UAAAE,EAAA,MACSG,QAAAA,GAAAA,EAAAA,gBAAAA,EACgB,QAAA,CACzB,QAAA,CAAW,EAAE,QAAA,CACb,QAAA,CAAW,EAAE,WAAA,CACV,SAAA,GAAY,KAAA,SAAW,EAAU,KAAA,CACvC,QAAA,EAAW,WAAA,CAAe,SAAA,EAAY,CAAI,EAAE,SAAA,CAAAT,EAAAU,EAAA,CAEvC,KAAA,SACJ,UAAAJ,EAAA,YACaK,QAAAA,EAClBR,KAAAA,SACK,KAAA,QACA,cAAA,GACQ,SAAA,GACL,UAAA,EACC,CAAA,EAAAD,CAAA,CAEF,CAAA,EAYL,CAEO,QAAAN,EAAUA,SAAAA,CAAAA,IAAAA,CAAAA,CAAmB,CAAA,CAAS,CAAA,EAAA,IAE7C,CAAA,CACW,CAAA,CAGvB;;;;;;;;;;;;;;;;;;"}