import{r as m,j as n,a as g}from"./jsx-runtime-a3a6c0b8.js";import{I as H}from"./input-field-b4e65e28.js";import{c as y}from"./index-a587463d.js";import{m as L}from"./motion-54668070.js";import{I as R}from"./icon-5fefd509.js";import{H as w}from"./heading-808ea78c.js";import{T as B}from"./text-59fe9fb2.js";import{B as F}from"./button-3cce3bbf.js";import{F as p}from"./flex-container-145d4933.js";import{E as K}from"./expandable-wrapper-5e4804ab.js";const I=(a,o)=>{switch(a){case"email":return o&&v(o);case"password":return o&&b(o);case"age-verification":return o&&Number(o)>19;default:return!0}},_=a=>a.required?a.pattern?!!I(a.pattern,a.value??a.originalValue)&&!!(a.value??a.originalValue):!!(a.value??a.originalValue):a.pattern?!!I(a.pattern,a.value??a.originalValue):!0,v=a=>a&&/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(a),b=a=>a&&a!=="";try{_.displayName="validateField",_.__docgenInfo={description:"",displayName:"validateField",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},height:{defaultValue:{value:'"md" for mobile'},description:"height of the input. sm = height 2.5rem, md = 3rem",name:"height",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'}]}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"IUILink"}},originalValue:{defaultValue:null,description:"prefilled default value used to compare with the state controlled value in order to detect changes to the form",name:"originalValue",required:!1,type:{name:"string"}},focusOnRender:{defaultValue:null,description:"",name:"focusOnRender",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}},onControlledChange:{defaultValue:null,description:"",name:"onControlledChange",required:!1,type:{name:"(((event: ChangeEvent<HTMLInputElement>) => void) & ((event: ChangeEvent<HTMLInputElement>) => void))"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean"}},dirty:{defaultValue:null,description:"",name:"dirty",required:!1,type:{name:"boolean"}},fieldType:{defaultValue:null,description:"decides what type of form field to render and what value types to use",name:"fieldType",required:!0,type:{name:'"input"'}},value:{defaultValue:null,description:"value is a form template controlled property updated by internal form template state",name:"value",required:!1,type:{name:"string"}},subtitle:{defaultValue:null,description:`Subtitle to be displayed in mobile list view
@example A subtitle can be "No phone number added", while a placeholder should be "Add phone number".`,name:"subtitle",required:!1,type:{name:"string"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"enum",value:[{value:'"email"'},{value:'"password"'},{value:'"phone"'},{value:'"age-verification"'}]}},alphaField:{defaultValue:null,description:"Field name to compare value with, e.g. confirm-password wants to match value with new-password",name:"alphaField",required:!1,type:{name:"string"}},betaField:{defaultValue:null,description:"Field name to re-validate, e.g. trigger confirm-password validation when new-password value updates",name:"betaField",required:!1,type:{name:"string"}},size:{defaultValue:{value:"'half'"},description:"Decides if a field should span 50% or 100% of parent width",name:"size",required:!1,type:{name:"enum",value:[{value:'"half"'},{value:'"full"'}]}}}}}catch{}try{v.displayName="isEmail",v.__docgenInfo={description:"",displayName:"isEmail",props:{}}}catch{}try{b.displayName="isPassword",b.__docgenInfo={description:"",displayName:"isPassword",props:{}}}catch{}const A="_form_ph2cy_1",S="_formDirectionRow_ph2cy_6",W="_formTitle_ph2cy_11",j="_field_ph2cy_15",z="_half_ph2cy_19",P="_full_ph2cy_23",$="_actionsWrapper_ph2cy_29",O="_link_ph2cy_38",U="_linkDisabled_ph2cy_39",G="_generalErrorMessage_ph2cy_50",J="_generalErrorMessageDisabled_ph2cy_56",Q="_loaderContainer_ph2cy_66",X="_successIcon_ph2cy_77",l={form:A,formDirectionRow:S,formTitle:W,field:j,half:z,full:P,actionsWrapper:$,link:O,linkDisabled:U,generalErrorMessage:G,generalErrorMessageDisabled:J,loaderContainer:Q,successIcon:X},T=({onSubmit:a,onControlledSubmit:o,formTitle:V,formSubtitle:q,loading:c,responseMessage:s,...t})=>{const[d,C]=m.useState(t.fields),[k,N]=m.useState(!1),E=m.useRef(null);m.useEffect(()=>{if(!E.current)return;const e=!d.some(i=>i.required&&!i.valid);N(e)},[d]);const x=m.useCallback(e=>{e.preventDefault(),a==null||a(d),o==null||o(e)},[d,a]),M=m.useCallback((e,i)=>{d.find(u=>u.name===i)&&C(u=>u.map(r=>{if(r.name===i){if(r.alphaField){const h=u.find(D=>D.name===r.alphaField);return{...r,dirty:!0,valid:(h==null?void 0:h.value)===e,value:e}}return{...r,dirty:!0,valid:_({...r,value:e}),value:e}}else return r.alphaField?{...r,dirty:r.dirty,valid:r.value===e,value:r.name===i?e:r.value}:r}))},[]);return s?n(L.div,{initial:{opacity:0,scale:.2},animate:{opacity:s?1:0,scale:s?1:.2},children:g("div",{className:l.loaderContainer,children:[s.icon&&n(R,{icon:s.icon,className:l.successIcon}),s.title&&n(w,{order:3,noMargin:!0,children:s.title}),n(B,{align:"center",children:s.message}),s.onClose&&n(F,{type:"button",surface:"primary",onClick:s.onClose,children:s.closeLabel??"StÃ¤ng"})]})}):g("form",{ref:E,className:y(l.form,t.alignSubmitButtonHorizontally?l.formDirectionRow:""),onSubmit:x,children:[g("div",{children:[V&&n(w,{order:3,className:l.formTitle,children:V}),q&&n("p",{className:l.formSubtitle,children:q}),n(p,{wrap:!0,children:d==null?void 0:d.map((e,i)=>n("div",{className:y(l.field,l[e.size??"half"]),children:e.fieldType==="input"&&n(H,{...e,value:e.value??e.originalValue,onChange:(f,u)=>{M(f,u)},onControlledChange:f=>{var u;(u=e.onControlledChange)==null||u.call(e,f)},focusOnRender:i===0,readonly:e.blocked,disabled:c})},e.name))}),n(K,{open:!!t.generalErrorMessage,children:n(p,{alignItems:"center",justifyContent:"center",children:t.generalErrorMessage&&n("p",{className:y(l.generalErrorMessage,{[l.generalErrorMessageDisabled]:c}),dangerouslySetInnerHTML:{__html:t.generalErrorMessage}})})})]}),t.captcha&&n(p,{justifyContent:"center",alignItems:"center",children:t.captcha}),t.actions&&n(p,{justifyContent:t.alignActions??"center",className:l.actionsWrapper,children:t.actions.map((e,i)=>n(F,{...e,disabled:e.type==="submit"?!k||e.disabled:e.disabled||c,loading:e.type==="submit"&&c},`${e.type}-${i}`))}),t.links&&n(p,{alignItems:t.alignActions??"center",flexDirection:"column",children:t.links.map((e,i)=>n("a",{className:y(l.link,{[l.linkDisabled]:c}),href:e.href,target:"_blank",children:e.name},`${e.name}-${i}`))})]})};try{T.displayName="Form",T.__docgenInfo={description:"",displayName:"Form",props:{formTitle:{defaultValue:null,description:"descriptive title to display on top of form",name:"formTitle",required:!0,type:{name:"string"}},formSubtitle:{defaultValue:null,description:"descriptive subtitle to display under formTitle",name:"formSubtitle",required:!1,type:{name:"string"}},onSubmit:{defaultValue:null,description:"submit that requires the complete form data",name:"onSubmit",required:!1,type:{name:"((data: TFormFieldType[]) => void)"}},onControlledSubmit:{defaultValue:null,description:"submit that requires only the react form event",name:"onControlledSubmit",required:!1,type:{name:"((event: FormEvent<HTMLFormElement>) => void)"}},loading:{defaultValue:null,description:"loading state which is necessary in order to disable form while loading",name:"loading",required:!0,type:{name:"boolean"}},fields:{defaultValue:null,description:"all fields to be rendered inside the form",name:"fields",required:!0,type:{name:"TFormFieldType[]"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"IButton[]"}},links:{defaultValue:null,description:"",name:"links",required:!1,type:{name:"TFormLink[]"}},alignActions:{defaultValue:null,description:"",name:"alignActions",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-start"'},{value:'"flex-end"'}]}},alignSubmitButtonHorizontally:{defaultValue:null,description:"",name:"alignSubmitButtonHorizontally",required:!1,type:{name:"boolean"}},generalErrorMessage:{defaultValue:null,description:"",name:"generalErrorMessage",required:!1,type:{name:"any"}},responseMessage:{defaultValue:null,description:"If true, a message will be displayed after submit response",name:"responseMessage",required:!1,type:{name:"TFormResponseMessage"}},captcha:{defaultValue:null,description:"",name:"captcha",required:!1,type:{name:"Element"}}}}}catch{}export{T as F,_ as v};
