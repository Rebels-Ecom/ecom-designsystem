import{r as P}from"./index-6f814c40.js";import{C as j}from"./card-image-f59eb7cd.js";import{c as l,P as $}from"./format-helper-c92b5c26.js";import{B as f}from"./button-08ef97ed.js";import{P as Q}from"./product-variant-list-df040eb5.js";import{g as U,f as D}from"./picture-helper-9c89293f.js";import{a as u,j as E}from"./jsx-runtime-76c5c2e2.js";import{d as F}from"./dummy-product-e2062002.js";import{ChangePackagingButtonStory as M,ButtonProductCardStory as z}from"./button.stories-6400eb39.js";const R="_productCard_15a0i_1",W="_productCardInput_15a0i_15",v="_productCardBtn_15a0i_19",c={productCard:R,productCardInput:W,productCardBtn:v},s=({productId:e,productName:t,productImageUrl:i,country:a,packaging:V,priceStr:N,price:p,salesUnit:q,itemNumberPerSalesUnit:m,tags:B,productVariantList:T,changePackagingButton:_,addToCartButton:k,addToCart:b})=>{const[r,g]=P.useState({productId:e,productName:t,productImage:U(e,i),country:a,packaging:V,priceStr:N,price:p,salesUnit:q,itemNumberPerSalesUnit:m,quantity:"1",totalPrice:l(p*m),tags:B,productVariantList:T,selectedVariantId:e}),[x,y]=P.useState(!1);function L(n){const o=parseInt(n.target.value)||1;g({...r,quantity:o.toString(),totalPrice:l(r.price*r.itemNumberPerSalesUnit*o)})}function A(){y(!0)}function O(n){const o=r.productId===n.variantId?parseInt(r.quantity):1;g({...r,productId:n.variantId,productImage:n.image,country:n.country,packaging:n.variantName,priceStr:n.listPricePerUnitString,price:n.price,salesUnit:n.salesUnit,itemNumberPerSalesUnit:n.itemNumberPerSalesUnit,totalPrice:l(n.price*n.itemNumberPerSalesUnit*o),quantity:o.toString(),selectedVariantId:n.variantId}),y(!1)}return x?u(Q,{className:c.productCard,variantsList:r.productVariantList,onVariantSelect:O,selectedVariantId:r.selectedVariantId}):E("div",{className:c.productCard,children:[u(j,{heading:r.productName,image:r.productImage,articleId:r.productId,country:r.country,packaging:r.packaging,unitPriceStr:r.priceStr,productTags:r.tags,fallbackImageUrl:D}),u(f,{..._,surface:"secondary",iconRight:{icon:"icon-layers"},rounded:!0,onClick:()=>A(),children:"Byt förpackning"}),u($,{className:c.productCardInput,salesUnit:r.salesUnit,itemNumberPerSalesUnit:r.itemNumberPerSalesUnit,totalPrice:r.totalPrice,quantity:r.quantity,quantityInputId:r.productId,onChange:L}),u(f,{...k,className:c.productCardBtn,fullWidth:!0,onClick:()=>b(r),children:"Lägg i kundvagn"})]})};try{s.displayName="ProductCard",s.__docgenInfo={description:"",displayName:"ProductCard",props:{product:{defaultValue:null,description:"",name:"product",required:!0,type:{name:"IProduct"}},changePackagingButton:{defaultValue:null,description:"",name:"changePackagingButton",required:!0,type:{name:"IButton"}},addToCartButton:{defaultValue:null,description:"",name:"addToCartButton",required:!0,type:{name:"IButton"}},addToCart:{defaultValue:null,description:"",name:"addToCart",required:!0,type:{name:"CallableFunction"}},productId:{defaultValue:null,description:"",name:"productId",required:!0,type:{name:"string"}},productName:{defaultValue:null,description:"",name:"productName",required:!0,type:{name:"string"}},productImageUrl:{defaultValue:null,description:"",name:"productImageUrl",required:!0,type:{name:"string"}},country:{defaultValue:null,description:"",name:"country",required:!0,type:{name:"string"}},packaging:{defaultValue:null,description:"",name:"packaging",required:!0,type:{name:"string"}},priceStr:{defaultValue:null,description:"",name:"priceStr",required:!0,type:{name:"string"}},price:{defaultValue:null,description:"",name:"price",required:!0,type:{name:"number"}},salesUnit:{defaultValue:null,description:"",name:"salesUnit",required:!0,type:{name:"string"}},itemNumberPerSalesUnit:{defaultValue:null,description:"",name:"itemNumberPerSalesUnit",required:!0,type:{name:"number"}},productVariantList:{defaultValue:null,description:"",name:"productVariantList",required:!0,type:{name:"IProductVariant[]"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"ITag[]"}},productDescription:{defaultValue:null,description:"",name:"productDescription",required:!1,type:{name:"string"}}}}}catch{}const w={title:"Design System/Molecules/Product/ProductCard",component:s},G={render:({...e})=>{function t(i){alert(`Adding to cart - ${i.productName} - ${i.packaging}. Quantity: ${i.quantity}, Total: ${i.totalPrice}`)}return u(s,{...e,addToCart:t})}};function h(e){return e.map(t=>({text:t.Text,shape:t.Shape?t.Shape:"pill",color:t.Class}))}function H(e,t){const i=t[0].VariantId;return t.map(a=>({productName:e,variantName:a.Name,variantId:a.VariantId,country:Array.isArray(a.ShortTexts)&&a.ShortTexts.length?a.ShortTexts[0]:"",listPricePerUnitString:a.ListPricePerUnitString,price:a.ListPricePerUnit,salesUnit:a.SalesUnit,itemNumberPerSalesUnit:a.UnitsPerBaseUnit,image:U(a.VariantId,a.PrimaryImageUrl),checked:a.VariantId===i,tags:h(a.Tags),onChange:()=>{}}))}function J(e){const t=e.Variants[0];return{productId:t.VariantId,productName:e.DisplayName,productImageUrl:t.PrimaryImageUrl,country:Array.isArray(t.ShortTexts)&&t.ShortTexts.length?t.ShortTexts[0]:"",packaging:t.VariantFullName,priceStr:t.ListPricePerUnitString,price:t.ListPricePerUnit,salesUnit:t.SalesUnit,itemNumberPerSalesUnit:t.UnitsPerBaseUnit,tags:h(t.Tags),productVariantList:H(e.DisplayName,e.Variants)}}const K=J(F),d={...G,args:{...K,changePackagingButton:M.args,addToCartButton:z.args}};var S,I,C;d.parameters={...d.parameters,docs:{...(S=d.parameters)==null?void 0:S.docs,source:{originalSource:`{
  ...ProductCardStoryTemplate,
  args: {
    ...productArgs,
    changePackagingButton: ChangePackagingButtonStory.args,
    addToCartButton: ButtonProductCardStory.args
  }
}`,...(C=(I=d.parameters)==null?void 0:I.docs)==null?void 0:C.source}}};const X=["ProductCardStory"],ot=Object.freeze(Object.defineProperty({__proto__:null,ProductCardStory:d,__namedExportsOrder:X,default:w},Symbol.toStringTag,{value:"Module"}));export{s as P,d as a,ot as p};
//# sourceMappingURL=product-card.stories-af28fb40.js.map
