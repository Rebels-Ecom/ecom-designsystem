{"version":3,"file":"modal-ea85392c.js","sources":["../../src/design-system/hooks/usePortal.ts","../../src/design-system/components/molecules/modal/modal.tsx"],"sourcesContent":["// Inspired by https://www.30secondsofcode.org/react/s/use-portal\r\n\r\nimport { useCallback, useState, useEffect, ReactNode } from 'react'\r\nimport { createPortal, unmountComponentAtNode } from 'react-dom'\r\n\r\ninterface IPortalState {\r\n  render: (children?: any) => any\r\n  remove: () => void\r\n}\r\n\r\nexport const usePortal = (selector: HTMLElement | null) => {\r\n  const [portal, setPortal] = useState<IPortalState>({\r\n    render: () => null,\r\n    remove: () => null,\r\n  })\r\n\r\n  const createPortalWithSelector = useCallback((selector: HTMLElement) => {\r\n    const Portal = ({ children }: { children: ReactNode }) => createPortal(children, selector)\r\n    const remove = () => unmountComponentAtNode(selector)\r\n\r\n    return {\r\n      render: Portal,\r\n      remove,\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selector) {\r\n      portal.remove()\r\n\r\n      const newPortal = createPortalWithSelector(selector) as unknown as IPortalState\r\n      setPortal(newPortal)\r\n\r\n      return () => {\r\n        newPortal.remove()\r\n      }\r\n    }\r\n  }, [selector])\r\n\r\n  return portal.render\r\n}\r\n\r\nexport default usePortal\r\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { usePortal } from '../../../hooks'\nimport { IconButton } from '../../atoms'\nimport styles from './modal.module.css'\nimport cx from 'classnames'\n\nexport type TModalBackdrop = 'dark' | 'light'\n\nexport interface IModal {\n  open: boolean\n  children: React.ReactNode\n  onClose: () => void\n  backdropType?: TModalBackdrop\n  dismissable?: boolean /** If true clicking outside the modal closes the modal.*/\n  hideCloseButton?: boolean;\n}\n\nfunction Modal({ open, children, onClose, backdropType = 'dark', dismissable, hideCloseButton }: IModal) {\n  const [selector, setSelector] = useState<HTMLElement | null>(null)\n\n  useEffect(() => {\n    setSelector(document.getElementById('portal'))\n  }, [])\n\n  const Portal = usePortal(selector)\n\n  const Backdrop = ({ children, onClick }: { children: any; onClick: () => void }) => {\n    return (\n      <motion.div\n        className={cx(styles.backdrop, styles[backdropType])}\n        onClick={onClick}\n        initial={false}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n\n  const Dialog = useCallback(({ children, onClick }: { children: any; onClick: () => void }) => {\n    return (\n      <motion.div\n        className={styles.modal}\n        onClick={(e) => e.stopPropagation()}\n        initial={false}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.3, ease: 'easeOut' }}\n        exit={{ opacity: 0, transition: { duration: 0.3 } }}\n      >\n        {!hideCloseButton && (\n          <IconButton\n            type='button'\n            className={styles.buttonClose}\n            onClick={onClick}\n            icon='icon-x'\n            size=\"large\"\n            isTransparent\n            noBorder\n            noPadding\n          />\n        )}\n        {children}\n      </motion.div>\n    )\n  }, [])\n\n  return (\n    <Portal>\n      <AnimatePresence initial={false}>\n        {open ? (\n          <Backdrop\n            onClick={() => {\n              dismissable ? onClose() : () => {}\n            }}\n          >\n            <Dialog onClick={onClose}> {children}</Dialog>\n          </Backdrop>\n        ) : null}\n      </AnimatePresence>\n    </Portal>\n  )\n}\n\nexport { Modal }\n"],"names":["usePortal","selector","portal","setPortal","useState","createPortalWithSelector","useCallback","children","createPortal","unmountComponentAtNode","useEffect","newPortal","usePortal$1","Modal","open","onClose","dismissable","setSelector","Portal","Backdrop","children2","onClick","_jsx","motion","cx","styles","backdropType","Dialog","_jsxs","modal","hideCloseButton","IconButton","buttonClose","AnimatePresence"],"mappings":"uSAUa,MAAAA,EAAaC,GAAiC,CACzD,KAAM,CAACC,EAAQC,CAAS,EAAIC,WAAuB,CACjD,OAAQ,IAAM,KACd,OAAQ,IAAM,IAAA,CACf,EAEKC,EAA2BC,cAAaL,IAIrC,CACL,OAJa,CAAC,CAAE,SAAAM,KAAwCC,EAAAA,aAAaD,EAAUN,CAAQ,EAKvF,OAJa,IAAMQ,yBAAuBR,CAAQ,CAIlD,GAED,CAAE,CAAA,EAELS,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAIT,EAAU,CACZC,EAAO,OAAO,EAER,MAAAS,EAAYN,EAAyBJ,CAAQ,EACnD,OAAAE,EAAUQ,CAAS,EAEZ,IAAM,CACXA,EAAU,OAAO,CAAA,EAErB,EACC,CAACV,CAAQ,CAAC,EAENC,EAAO,MAChB,EAEAU,EAAeZ,iKCxBf,SAAAa,EAAA,CAAe,KAAAC,EAAEA,SAAAA,EAAMP,QAAAA,EAAUQ,aAAAA,EAAAA,OAAwB,YAAAC,EAAQA,gBAAAA,CAAqC,EAAA,CACpG,KAAA,CAAAf,EAAAgB,CAAA,EAAAb,EAAA,SAAA,IAAA,EAEAM,EAAAA,UAAAA,IAAAA,CACEO,EAAAA,SAAAA,eAAAA,QAAAA,CAAAA,CAA6C,EAAA,CAAA,CAAA,EAG/C,MAAAC,EAAAlB,EAAAC,CAAA,EAEAkB,EAAA,CAAA,CAAkB,SAAAC,EAAEb,QAAAA,CAAUc,IAC5BC,EAAAC,EAAA,IAAA,CACa,UAAAC,EAAAC,EAAA,SAAAA,EAAAC,CAAA,CAAA,EAC0C,QAAAL,EACnDA,QAAAA,GACS,QAAA,CACA,QAAA,CAAW,EAAE,KAAA,CAChB,QAAA,CAAW,EAAE,SAAAD,CAElBb,CAAAA,EAKPoB,EAAArB,EAAAA,YAAA,CAAA,CAA4B,SAAAc,EAAEb,QAAAA,CAAUc,IACtCO,EAAAL,EAAA,IAAA,CACa,UAAAE,EAAA,MACSI,QAAAA,GAAAA,EAAAA,gBAAAA,EACgB,QAAA,GACzB,QAAA,CACA,QAAA,CAAW,EAAE,WAAA,CACV,SAAA,GAAY,KAAA,SAAW,EAAU,KAAA,CACvC,QAAA,EAAW,WAAA,CAAe,SAAA,EAAY,CAAI,EAAE,SAAA,CAAA,CAAAC,GAAAR,EAAAS,EAAA,CAGrC,KAAA,SACJ,UAAAN,EAAA,YACaO,QAAAA,EAClBX,KAAAA,SACK,KAAA,QACA,cAAA,GACQ,SAAA,GACL,UAAA,EACC,CAAA,EAAAD,CAAA,CAGJ,CAAA,EACC,CAAA,CAAA,EAIhB,OAAAE,EAAAJ,EAAA,CACS,SAAAI,EAAAW,EAAA,CACW,QAAA,GAAU,SAAAnB,EAAAQ,EAAAH,EAAA,CAEb,QAAA,IAAA,CAELH,GAAAA,EAAAA,CAAiC,EACnC,SAAAY,EAAAD,EAAA,CAEO,QAAAZ,EAAUA,SAAAA,CAAAA,IAAAA,CAAAA,CAAmB,CAAA,CAAS,CAAA,EAAA,IAE7C,CAAA,CACW,CAAA,CAGvB"}